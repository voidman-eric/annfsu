{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return RealtimePresence;\n    }\n  });\n  Object.defineProperty(exports, \"REALTIME_PRESENCE_LISTEN_EVENTS\", {\n    enumerable: true,\n    get: function () {\n      return REALTIME_PRESENCE_LISTEN_EVENTS;\n    }\n  });\n  /*\n    This file draws heavily from https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/assets/js/phoenix/presence.js\n    License: https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/LICENSE.md\n  */\n  var REALTIME_PRESENCE_LISTEN_EVENTS;\n  (function (REALTIME_PRESENCE_LISTEN_EVENTS) {\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"SYNC\"] = \"sync\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"JOIN\"] = \"join\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"LEAVE\"] = \"leave\";\n  })(REALTIME_PRESENCE_LISTEN_EVENTS || (REALTIME_PRESENCE_LISTEN_EVENTS = {}));\n  class RealtimePresence {\n    /**\n     * Creates a Presence helper that keeps the local presence state in sync with the server.\n     *\n     * @param channel - The realtime channel to bind to.\n     * @param opts - Optional custom event names, e.g. `{ events: { state: 'state', diff: 'diff' } }`.\n     *\n     * @example\n     * ```ts\n     * const presence = new RealtimePresence(channel)\n     *\n     * channel.on('presence', ({ event, key }) => {\n     *   console.log(`Presence ${event} on ${key}`)\n     * })\n     * ```\n     */\n    constructor(channel, opts) {\n      this.channel = channel;\n      this.state = {};\n      this.pendingDiffs = [];\n      this.joinRef = null;\n      this.enabled = false;\n      this.caller = {\n        onJoin: () => {},\n        onLeave: () => {},\n        onSync: () => {}\n      };\n      const events = (opts === null || opts === void 0 ? void 0 : opts.events) || {\n        state: 'presence_state',\n        diff: 'presence_diff'\n      };\n      this.channel._on(events.state, {}, newState => {\n        const {\n          onJoin,\n          onLeave,\n          onSync\n        } = this.caller;\n        this.joinRef = this.channel._joinRef();\n        this.state = RealtimePresence.syncState(this.state, newState, onJoin, onLeave);\n        this.pendingDiffs.forEach(diff => {\n          this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n        });\n        this.pendingDiffs = [];\n        onSync();\n      });\n      this.channel._on(events.diff, {}, diff => {\n        const {\n          onJoin,\n          onLeave,\n          onSync\n        } = this.caller;\n        if (this.inPendingSyncState()) {\n          this.pendingDiffs.push(diff);\n        } else {\n          this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n          onSync();\n        }\n      });\n      this.onJoin((key, currentPresences, newPresences) => {\n        this.channel._trigger('presence', {\n          event: 'join',\n          key,\n          currentPresences,\n          newPresences\n        });\n      });\n      this.onLeave((key, currentPresences, leftPresences) => {\n        this.channel._trigger('presence', {\n          event: 'leave',\n          key,\n          currentPresences,\n          leftPresences\n        });\n      });\n      this.onSync(() => {\n        this.channel._trigger('presence', {\n          event: 'sync'\n        });\n      });\n    }\n    /**\n     * Used to sync the list of presences on the server with the\n     * client's state.\n     *\n     * An optional `onJoin` and `onLeave` callback can be provided to\n     * react to changes in the client's local presences across\n     * disconnects and reconnects with the server.\n     *\n     * @internal\n     */\n    static syncState(currentState, newState, onJoin, onLeave) {\n      const state = this.cloneDeep(currentState);\n      const transformedState = this.transformState(newState);\n      const joins = {};\n      const leaves = {};\n      this.map(state, (key, presences) => {\n        if (!transformedState[key]) {\n          leaves[key] = presences;\n        }\n      });\n      this.map(transformedState, (key, newPresences) => {\n        const currentPresences = state[key];\n        if (currentPresences) {\n          const newPresenceRefs = newPresences.map(m => m.presence_ref);\n          const curPresenceRefs = currentPresences.map(m => m.presence_ref);\n          const joinedPresences = newPresences.filter(m => curPresenceRefs.indexOf(m.presence_ref) < 0);\n          const leftPresences = currentPresences.filter(m => newPresenceRefs.indexOf(m.presence_ref) < 0);\n          if (joinedPresences.length > 0) {\n            joins[key] = joinedPresences;\n          }\n          if (leftPresences.length > 0) {\n            leaves[key] = leftPresences;\n          }\n        } else {\n          joins[key] = newPresences;\n        }\n      });\n      return this.syncDiff(state, {\n        joins,\n        leaves\n      }, onJoin, onLeave);\n    }\n    /**\n     * Used to sync a diff of presence join and leave events from the\n     * server, as they happen.\n     *\n     * Like `syncState`, `syncDiff` accepts optional `onJoin` and\n     * `onLeave` callbacks to react to a user joining or leaving from a\n     * device.\n     *\n     * @internal\n     */\n    static syncDiff(state, diff, onJoin, onLeave) {\n      const {\n        joins,\n        leaves\n      } = {\n        joins: this.transformState(diff.joins),\n        leaves: this.transformState(diff.leaves)\n      };\n      if (!onJoin) {\n        onJoin = () => {};\n      }\n      if (!onLeave) {\n        onLeave = () => {};\n      }\n      this.map(joins, (key, newPresences) => {\n        var _a;\n        const currentPresences = (_a = state[key]) !== null && _a !== void 0 ? _a : [];\n        state[key] = this.cloneDeep(newPresences);\n        if (currentPresences.length > 0) {\n          const joinedPresenceRefs = state[key].map(m => m.presence_ref);\n          const curPresences = currentPresences.filter(m => joinedPresenceRefs.indexOf(m.presence_ref) < 0);\n          state[key].unshift(...curPresences);\n        }\n        onJoin(key, currentPresences, newPresences);\n      });\n      this.map(leaves, (key, leftPresences) => {\n        let currentPresences = state[key];\n        if (!currentPresences) return;\n        const presenceRefsToRemove = leftPresences.map(m => m.presence_ref);\n        currentPresences = currentPresences.filter(m => presenceRefsToRemove.indexOf(m.presence_ref) < 0);\n        state[key] = currentPresences;\n        onLeave(key, currentPresences, leftPresences);\n        if (currentPresences.length === 0) delete state[key];\n      });\n      return state;\n    }\n    /** @internal */\n    static map(obj, func) {\n      return Object.getOwnPropertyNames(obj).map(key => func(key, obj[key]));\n    }\n    /**\n     * Remove 'metas' key\n     * Change 'phx_ref' to 'presence_ref'\n     * Remove 'phx_ref' and 'phx_ref_prev'\n     *\n     * @example\n     * // returns {\n     *  abc123: [\n     *    { presence_ref: '2', user_id: 1 },\n     *    { presence_ref: '3', user_id: 2 }\n     *  ]\n     * }\n     * RealtimePresence.transformState({\n     *  abc123: {\n     *    metas: [\n     *      { phx_ref: '2', phx_ref_prev: '1' user_id: 1 },\n     *      { phx_ref: '3', user_id: 2 }\n     *    ]\n     *  }\n     * })\n     *\n     * @internal\n     */\n    static transformState(state) {\n      state = this.cloneDeep(state);\n      return Object.getOwnPropertyNames(state).reduce((newState, key) => {\n        const presences = state[key];\n        if ('metas' in presences) {\n          newState[key] = presences.metas.map(presence => {\n            presence['presence_ref'] = presence['phx_ref'];\n            delete presence['phx_ref'];\n            delete presence['phx_ref_prev'];\n            return presence;\n          });\n        } else {\n          newState[key] = presences;\n        }\n        return newState;\n      }, {});\n    }\n    /** @internal */\n    static cloneDeep(obj) {\n      return JSON.parse(JSON.stringify(obj));\n    }\n    /** @internal */\n    onJoin(callback) {\n      this.caller.onJoin = callback;\n    }\n    /** @internal */\n    onLeave(callback) {\n      this.caller.onLeave = callback;\n    }\n    /** @internal */\n    onSync(callback) {\n      this.caller.onSync = callback;\n    }\n    /** @internal */\n    inPendingSyncState() {\n      return !this.joinRef || this.joinRef !== this.channel._joinRef();\n    }\n  }\n});","lineCount":262,"map":[[7,2,11,15,"Object"],[7,8,11,15],[7,9,11,15,"defineProperty"],[7,23,11,15],[7,24,11,15,"exports"],[7,31,11,15],[8,4,11,15,"enumerable"],[8,14,11,15],[9,4,11,15,"get"],[9,7,11,15],[9,18,11,15,"get"],[9,19,11,15],[10,6,11,15],[10,13,11,15,"RealtimePresence"],[10,29,11,15],[11,4,11,15],[12,2,11,15],[13,2,5,0,"Object"],[13,8,5,0],[13,9,5,0,"defineProperty"],[13,23,5,0],[13,24,5,0,"exports"],[13,31,5,0],[14,4,5,0,"enumerable"],[14,14,5,0],[15,4,5,0,"get"],[15,7,5,0],[15,18,5,0,"get"],[15,19,5,0],[16,6,5,0],[16,13,5,0,"REALTIME_PRESENCE_LISTEN_EVENTS"],[16,44,5,0],[17,4,5,0],[18,2,5,0],[19,2,1,0],[20,0,2,0],[21,0,3,0],[22,0,4,0],[23,2,5,7],[23,6,5,11,"REALTIME_PRESENCE_LISTEN_EVENTS"],[23,37,5,42],[24,2,6,0],[24,3,6,1],[24,13,6,11,"REALTIME_PRESENCE_LISTEN_EVENTS"],[24,44,6,42],[24,46,6,44],[25,4,7,4,"REALTIME_PRESENCE_LISTEN_EVENTS"],[25,35,7,35],[25,36,7,36],[25,42,7,42],[25,43,7,43],[25,46,7,46],[25,52,7,52],[26,4,8,4,"REALTIME_PRESENCE_LISTEN_EVENTS"],[26,35,8,35],[26,36,8,36],[26,42,8,42],[26,43,8,43],[26,46,8,46],[26,52,8,52],[27,4,9,4,"REALTIME_PRESENCE_LISTEN_EVENTS"],[27,35,9,35],[27,36,9,36],[27,43,9,43],[27,44,9,44],[27,47,9,47],[27,54,9,54],[28,2,10,0],[28,3,10,1],[28,5,10,3,"REALTIME_PRESENCE_LISTEN_EVENTS"],[28,36,10,34],[28,41,10,39,"REALTIME_PRESENCE_LISTEN_EVENTS"],[28,72,10,70],[28,75,10,73],[28,76,10,74],[28,77,10,75],[28,78,10,76],[28,79,10,77],[29,2,11,15],[29,8,11,21,"RealtimePresence"],[29,24,11,37],[29,25,11,38],[30,4,12,4],[31,0,13,0],[32,0,14,0],[33,0,15,0],[34,0,16,0],[35,0,17,0],[36,0,18,0],[37,0,19,0],[38,0,20,0],[39,0,21,0],[40,0,22,0],[41,0,23,0],[42,0,24,0],[43,0,25,0],[44,0,26,0],[45,4,27,4,"constructor"],[45,15,27,15,"constructor"],[45,16,27,16,"channel"],[45,23,27,23],[45,25,27,25,"opts"],[45,29,27,29],[45,31,27,31],[46,6,28,8],[46,10,28,12],[46,11,28,13,"channel"],[46,18,28,20],[46,21,28,23,"channel"],[46,28,28,30],[47,6,29,8],[47,10,29,12],[47,11,29,13,"state"],[47,16,29,18],[47,19,29,21],[47,20,29,22],[47,21,29,23],[48,6,30,8],[48,10,30,12],[48,11,30,13,"pendingDiffs"],[48,23,30,25],[48,26,30,28],[48,28,30,30],[49,6,31,8],[49,10,31,12],[49,11,31,13,"joinRef"],[49,18,31,20],[49,21,31,23],[49,25,31,27],[50,6,32,8],[50,10,32,12],[50,11,32,13,"enabled"],[50,18,32,20],[50,21,32,23],[50,26,32,28],[51,6,33,8],[51,10,33,12],[51,11,33,13,"caller"],[51,17,33,19],[51,20,33,22],[52,8,34,12,"onJoin"],[52,14,34,18],[52,16,34,20,"onJoin"],[52,17,34,20],[52,22,34,26],[52,23,34,28],[52,24,34,29],[53,8,35,12,"onLeave"],[53,15,35,19],[53,17,35,21,"onLeave"],[53,18,35,21],[53,23,35,27],[53,24,35,29],[53,25,35,30],[54,8,36,12,"onSync"],[54,14,36,18],[54,16,36,20,"onSync"],[54,17,36,20],[54,22,36,26],[54,23,36,28],[55,6,37,8],[55,7,37,9],[56,6,38,8],[56,12,38,14,"events"],[56,18,38,20],[56,21,38,23],[56,22,38,24,"opts"],[56,26,38,28],[56,31,38,33],[56,35,38,37],[56,39,38,41,"opts"],[56,43,38,45],[56,48,38,50],[56,53,38,55],[56,54,38,56],[56,57,38,59],[56,62,38,64],[56,63,38,65],[56,66,38,68,"opts"],[56,70,38,72],[56,71,38,73,"events"],[56,77,38,79],[56,82,38,84],[57,8,39,12,"state"],[57,13,39,17],[57,15,39,19],[57,31,39,35],[58,8,40,12,"diff"],[58,12,40,16],[58,14,40,18],[59,6,41,8],[59,7,41,9],[60,6,42,8],[60,10,42,12],[60,11,42,13,"channel"],[60,18,42,20],[60,19,42,21,"_on"],[60,22,42,24],[60,23,42,25,"events"],[60,29,42,31],[60,30,42,32,"state"],[60,35,42,37],[60,37,42,39],[60,38,42,40],[60,39,42,41],[60,41,42,44,"newState"],[60,49,42,52],[60,53,42,57],[61,8,43,12],[61,14,43,18],[62,10,43,20,"onJoin"],[62,16,43,26],[63,10,43,28,"onLeave"],[63,17,43,35],[64,10,43,37,"onSync"],[65,8,43,44],[65,9,43,45],[65,12,43,48],[65,16,43,52],[65,17,43,53,"caller"],[65,23,43,59],[66,8,44,12],[66,12,44,16],[66,13,44,17,"joinRef"],[66,20,44,24],[66,23,44,27],[66,27,44,31],[66,28,44,32,"channel"],[66,35,44,39],[66,36,44,40,"_joinRef"],[66,44,44,48],[66,45,44,49],[66,46,44,50],[67,8,45,12],[67,12,45,16],[67,13,45,17,"state"],[67,18,45,22],[67,21,45,25,"RealtimePresence"],[67,37,45,41],[67,38,45,42,"syncState"],[67,47,45,51],[67,48,45,52],[67,52,45,56],[67,53,45,57,"state"],[67,58,45,62],[67,60,45,64,"newState"],[67,68,45,72],[67,70,45,74,"onJoin"],[67,76,45,80],[67,78,45,82,"onLeave"],[67,85,45,89],[67,86,45,90],[68,8,46,12],[68,12,46,16],[68,13,46,17,"pendingDiffs"],[68,25,46,29],[68,26,46,30,"forEach"],[68,33,46,37],[68,34,46,39,"diff"],[68,38,46,43],[68,42,46,48],[69,10,47,16],[69,14,47,20],[69,15,47,21,"state"],[69,20,47,26],[69,23,47,29,"RealtimePresence"],[69,39,47,45],[69,40,47,46,"syncDiff"],[69,48,47,54],[69,49,47,55],[69,53,47,59],[69,54,47,60,"state"],[69,59,47,65],[69,61,47,67,"diff"],[69,65,47,71],[69,67,47,73,"onJoin"],[69,73,47,79],[69,75,47,81,"onLeave"],[69,82,47,88],[69,83,47,89],[70,8,48,12],[70,9,48,13],[70,10,48,14],[71,8,49,12],[71,12,49,16],[71,13,49,17,"pendingDiffs"],[71,25,49,29],[71,28,49,32],[71,30,49,34],[72,8,50,12,"onSync"],[72,14,50,18],[72,15,50,19],[72,16,50,20],[73,6,51,8],[73,7,51,9],[73,8,51,10],[74,6,52,8],[74,10,52,12],[74,11,52,13,"channel"],[74,18,52,20],[74,19,52,21,"_on"],[74,22,52,24],[74,23,52,25,"events"],[74,29,52,31],[74,30,52,32,"diff"],[74,34,52,36],[74,36,52,38],[74,37,52,39],[74,38,52,40],[74,40,52,43,"diff"],[74,44,52,47],[74,48,52,52],[75,8,53,12],[75,14,53,18],[76,10,53,20,"onJoin"],[76,16,53,26],[77,10,53,28,"onLeave"],[77,17,53,35],[78,10,53,37,"onSync"],[79,8,53,44],[79,9,53,45],[79,12,53,48],[79,16,53,52],[79,17,53,53,"caller"],[79,23,53,59],[80,8,54,12],[80,12,54,16],[80,16,54,20],[80,17,54,21,"inPendingSyncState"],[80,35,54,39],[80,36,54,40],[80,37,54,41],[80,39,54,43],[81,10,55,16],[81,14,55,20],[81,15,55,21,"pendingDiffs"],[81,27,55,33],[81,28,55,34,"push"],[81,32,55,38],[81,33,55,39,"diff"],[81,37,55,43],[81,38,55,44],[82,8,56,12],[82,9,56,13],[82,15,57,17],[83,10,58,16],[83,14,58,20],[83,15,58,21,"state"],[83,20,58,26],[83,23,58,29,"RealtimePresence"],[83,39,58,45],[83,40,58,46,"syncDiff"],[83,48,58,54],[83,49,58,55],[83,53,58,59],[83,54,58,60,"state"],[83,59,58,65],[83,61,58,67,"diff"],[83,65,58,71],[83,67,58,73,"onJoin"],[83,73,58,79],[83,75,58,81,"onLeave"],[83,82,58,88],[83,83,58,89],[84,10,59,16,"onSync"],[84,16,59,22],[84,17,59,23],[84,18,59,24],[85,8,60,12],[86,6,61,8],[86,7,61,9],[86,8,61,10],[87,6,62,8],[87,10,62,12],[87,11,62,13,"onJoin"],[87,17,62,19],[87,18,62,20],[87,19,62,21,"key"],[87,22,62,24],[87,24,62,26,"currentPresences"],[87,40,62,42],[87,42,62,44,"newPresences"],[87,54,62,56],[87,59,62,61],[88,8,63,12],[88,12,63,16],[88,13,63,17,"channel"],[88,20,63,24],[88,21,63,25,"_trigger"],[88,29,63,33],[88,30,63,34],[88,40,63,44],[88,42,63,46],[89,10,64,16,"event"],[89,15,64,21],[89,17,64,23],[89,23,64,29],[90,10,65,16,"key"],[90,13,65,19],[91,10,66,16,"currentPresences"],[91,26,66,32],[92,10,67,16,"newPresences"],[93,8,68,12],[93,9,68,13],[93,10,68,14],[94,6,69,8],[94,7,69,9],[94,8,69,10],[95,6,70,8],[95,10,70,12],[95,11,70,13,"onLeave"],[95,18,70,20],[95,19,70,21],[95,20,70,22,"key"],[95,23,70,25],[95,25,70,27,"currentPresences"],[95,41,70,43],[95,43,70,45,"leftPresences"],[95,56,70,58],[95,61,70,63],[96,8,71,12],[96,12,71,16],[96,13,71,17,"channel"],[96,20,71,24],[96,21,71,25,"_trigger"],[96,29,71,33],[96,30,71,34],[96,40,71,44],[96,42,71,46],[97,10,72,16,"event"],[97,15,72,21],[97,17,72,23],[97,24,72,30],[98,10,73,16,"key"],[98,13,73,19],[99,10,74,16,"currentPresences"],[99,26,74,32],[100,10,75,16,"leftPresences"],[101,8,76,12],[101,9,76,13],[101,10,76,14],[102,6,77,8],[102,7,77,9],[102,8,77,10],[103,6,78,8],[103,10,78,12],[103,11,78,13,"onSync"],[103,17,78,19],[103,18,78,20],[103,24,78,26],[104,8,79,12],[104,12,79,16],[104,13,79,17,"channel"],[104,20,79,24],[104,21,79,25,"_trigger"],[104,29,79,33],[104,30,79,34],[104,40,79,44],[104,42,79,46],[105,10,79,48,"event"],[105,15,79,53],[105,17,79,55],[106,8,79,62],[106,9,79,63],[106,10,79,64],[107,6,80,8],[107,7,80,9],[107,8,80,10],[108,4,81,4],[109,4,82,4],[110,0,83,0],[111,0,84,0],[112,0,85,0],[113,0,86,0],[114,0,87,0],[115,0,88,0],[116,0,89,0],[117,0,90,0],[118,0,91,0],[119,4,92,4],[119,11,92,11,"syncState"],[119,20,92,20,"syncState"],[119,21,92,21,"currentState"],[119,33,92,33],[119,35,92,35,"newState"],[119,43,92,43],[119,45,92,45,"onJoin"],[119,51,92,51],[119,53,92,53,"onLeave"],[119,60,92,60],[119,62,92,62],[120,6,93,8],[120,12,93,14,"state"],[120,17,93,19],[120,20,93,22],[120,24,93,26],[120,25,93,27,"cloneDeep"],[120,34,93,36],[120,35,93,37,"currentState"],[120,47,93,49],[120,48,93,50],[121,6,94,8],[121,12,94,14,"transformedState"],[121,28,94,30],[121,31,94,33],[121,35,94,37],[121,36,94,38,"transformState"],[121,50,94,52],[121,51,94,53,"newState"],[121,59,94,61],[121,60,94,62],[122,6,95,8],[122,12,95,14,"joins"],[122,17,95,19],[122,20,95,22],[122,21,95,23],[122,22,95,24],[123,6,96,8],[123,12,96,14,"leaves"],[123,18,96,20],[123,21,96,23],[123,22,96,24],[123,23,96,25],[124,6,97,8],[124,10,97,12],[124,11,97,13,"map"],[124,14,97,16],[124,15,97,17,"state"],[124,20,97,22],[124,22,97,24],[124,23,97,25,"key"],[124,26,97,28],[124,28,97,30,"presences"],[124,37,97,39],[124,42,97,44],[125,8,98,12],[125,12,98,16],[125,13,98,17,"transformedState"],[125,29,98,33],[125,30,98,34,"key"],[125,33,98,37],[125,34,98,38],[125,36,98,40],[126,10,99,16,"leaves"],[126,16,99,22],[126,17,99,23,"key"],[126,20,99,26],[126,21,99,27],[126,24,99,30,"presences"],[126,33,99,39],[127,8,100,12],[128,6,101,8],[128,7,101,9],[128,8,101,10],[129,6,102,8],[129,10,102,12],[129,11,102,13,"map"],[129,14,102,16],[129,15,102,17,"transformedState"],[129,31,102,33],[129,33,102,35],[129,34,102,36,"key"],[129,37,102,39],[129,39,102,41,"newPresences"],[129,51,102,53],[129,56,102,58],[130,8,103,12],[130,14,103,18,"currentPresences"],[130,30,103,34],[130,33,103,37,"state"],[130,38,103,42],[130,39,103,43,"key"],[130,42,103,46],[130,43,103,47],[131,8,104,12],[131,12,104,16,"currentPresences"],[131,28,104,32],[131,30,104,34],[132,10,105,16],[132,16,105,22,"newPresenceRefs"],[132,31,105,37],[132,34,105,40,"newPresences"],[132,46,105,52],[132,47,105,53,"map"],[132,50,105,56],[132,51,105,58,"m"],[132,52,105,59],[132,56,105,64,"m"],[132,57,105,65],[132,58,105,66,"presence_ref"],[132,70,105,78],[132,71,105,79],[133,10,106,16],[133,16,106,22,"curPresenceRefs"],[133,31,106,37],[133,34,106,40,"currentPresences"],[133,50,106,56],[133,51,106,57,"map"],[133,54,106,60],[133,55,106,62,"m"],[133,56,106,63],[133,60,106,68,"m"],[133,61,106,69],[133,62,106,70,"presence_ref"],[133,74,106,82],[133,75,106,83],[134,10,107,16],[134,16,107,22,"joinedPresences"],[134,31,107,37],[134,34,107,40,"newPresences"],[134,46,107,52],[134,47,107,53,"filter"],[134,53,107,59],[134,54,107,61,"m"],[134,55,107,62],[134,59,107,67,"curPresenceRefs"],[134,74,107,82],[134,75,107,83,"indexOf"],[134,82,107,90],[134,83,107,91,"m"],[134,84,107,92],[134,85,107,93,"presence_ref"],[134,97,107,105],[134,98,107,106],[134,101,107,109],[134,102,107,110],[134,103,107,111],[135,10,108,16],[135,16,108,22,"leftPresences"],[135,29,108,35],[135,32,108,38,"currentPresences"],[135,48,108,54],[135,49,108,55,"filter"],[135,55,108,61],[135,56,108,63,"m"],[135,57,108,64],[135,61,108,69,"newPresenceRefs"],[135,76,108,84],[135,77,108,85,"indexOf"],[135,84,108,92],[135,85,108,93,"m"],[135,86,108,94],[135,87,108,95,"presence_ref"],[135,99,108,107],[135,100,108,108],[135,103,108,111],[135,104,108,112],[135,105,108,113],[136,10,109,16],[136,14,109,20,"joinedPresences"],[136,29,109,35],[136,30,109,36,"length"],[136,36,109,42],[136,39,109,45],[136,40,109,46],[136,42,109,48],[137,12,110,20,"joins"],[137,17,110,25],[137,18,110,26,"key"],[137,21,110,29],[137,22,110,30],[137,25,110,33,"joinedPresences"],[137,40,110,48],[138,10,111,16],[139,10,112,16],[139,14,112,20,"leftPresences"],[139,27,112,33],[139,28,112,34,"length"],[139,34,112,40],[139,37,112,43],[139,38,112,44],[139,40,112,46],[140,12,113,20,"leaves"],[140,18,113,26],[140,19,113,27,"key"],[140,22,113,30],[140,23,113,31],[140,26,113,34,"leftPresences"],[140,39,113,47],[141,10,114,16],[142,8,115,12],[142,9,115,13],[142,15,116,17],[143,10,117,16,"joins"],[143,15,117,21],[143,16,117,22,"key"],[143,19,117,25],[143,20,117,26],[143,23,117,29,"newPresences"],[143,35,117,41],[144,8,118,12],[145,6,119,8],[145,7,119,9],[145,8,119,10],[146,6,120,8],[146,13,120,15],[146,17,120,19],[146,18,120,20,"syncDiff"],[146,26,120,28],[146,27,120,29,"state"],[146,32,120,34],[146,34,120,36],[147,8,120,38,"joins"],[147,13,120,43],[148,8,120,45,"leaves"],[149,6,120,52],[149,7,120,53],[149,9,120,55,"onJoin"],[149,15,120,61],[149,17,120,63,"onLeave"],[149,24,120,70],[149,25,120,71],[150,4,121,4],[151,4,122,4],[152,0,123,0],[153,0,124,0],[154,0,125,0],[155,0,126,0],[156,0,127,0],[157,0,128,0],[158,0,129,0],[159,0,130,0],[160,0,131,0],[161,4,132,4],[161,11,132,11,"syncDiff"],[161,19,132,19,"syncDiff"],[161,20,132,20,"state"],[161,25,132,25],[161,27,132,27,"diff"],[161,31,132,31],[161,33,132,33,"onJoin"],[161,39,132,39],[161,41,132,41,"onLeave"],[161,48,132,48],[161,50,132,50],[162,6,133,8],[162,12,133,14],[163,8,133,16,"joins"],[163,13,133,21],[164,8,133,23,"leaves"],[165,6,133,30],[165,7,133,31],[165,10,133,34],[166,8,134,12,"joins"],[166,13,134,17],[166,15,134,19],[166,19,134,23],[166,20,134,24,"transformState"],[166,34,134,38],[166,35,134,39,"diff"],[166,39,134,43],[166,40,134,44,"joins"],[166,45,134,49],[166,46,134,50],[167,8,135,12,"leaves"],[167,14,135,18],[167,16,135,20],[167,20,135,24],[167,21,135,25,"transformState"],[167,35,135,39],[167,36,135,40,"diff"],[167,40,135,44],[167,41,135,45,"leaves"],[167,47,135,51],[168,6,136,8],[168,7,136,9],[169,6,137,8],[169,10,137,12],[169,11,137,13,"onJoin"],[169,17,137,19],[169,19,137,21],[170,8,138,12,"onJoin"],[170,14,138,18],[170,17,138,21,"onJoin"],[170,18,138,21],[170,23,138,27],[170,24,138,29],[170,25,138,30],[171,6,139,8],[172,6,140,8],[172,10,140,12],[172,11,140,13,"onLeave"],[172,18,140,20],[172,20,140,22],[173,8,141,12,"onLeave"],[173,15,141,19],[173,18,141,22,"onLeave"],[173,19,141,22],[173,24,141,28],[173,25,141,30],[173,26,141,31],[174,6,142,8],[175,6,143,8],[175,10,143,12],[175,11,143,13,"map"],[175,14,143,16],[175,15,143,17,"joins"],[175,20,143,22],[175,22,143,24],[175,23,143,25,"key"],[175,26,143,28],[175,28,143,30,"newPresences"],[175,40,143,42],[175,45,143,47],[176,8,144,12],[176,12,144,16,"_a"],[176,14,144,18],[177,8,145,12],[177,14,145,18,"currentPresences"],[177,30,145,34],[177,33,145,37],[177,34,145,38,"_a"],[177,36,145,40],[177,39,145,43,"state"],[177,44,145,48],[177,45,145,49,"key"],[177,48,145,52],[177,49,145,53],[177,55,145,59],[177,59,145,63],[177,63,145,67,"_a"],[177,65,145,69],[177,70,145,74],[177,75,145,79],[177,76,145,80],[177,79,145,83,"_a"],[177,81,145,85],[177,84,145,88],[177,86,145,90],[178,8,146,12,"state"],[178,13,146,17],[178,14,146,18,"key"],[178,17,146,21],[178,18,146,22],[178,21,146,25],[178,25,146,29],[178,26,146,30,"cloneDeep"],[178,35,146,39],[178,36,146,40,"newPresences"],[178,48,146,52],[178,49,146,53],[179,8,147,12],[179,12,147,16,"currentPresences"],[179,28,147,32],[179,29,147,33,"length"],[179,35,147,39],[179,38,147,42],[179,39,147,43],[179,41,147,45],[180,10,148,16],[180,16,148,22,"joinedPresenceRefs"],[180,34,148,40],[180,37,148,43,"state"],[180,42,148,48],[180,43,148,49,"key"],[180,46,148,52],[180,47,148,53],[180,48,148,54,"map"],[180,51,148,57],[180,52,148,59,"m"],[180,53,148,60],[180,57,148,65,"m"],[180,58,148,66],[180,59,148,67,"presence_ref"],[180,71,148,79],[180,72,148,80],[181,10,149,16],[181,16,149,22,"curPresences"],[181,28,149,34],[181,31,149,37,"currentPresences"],[181,47,149,53],[181,48,149,54,"filter"],[181,54,149,60],[181,55,149,62,"m"],[181,56,149,63],[181,60,149,68,"joinedPresenceRefs"],[181,78,149,86],[181,79,149,87,"indexOf"],[181,86,149,94],[181,87,149,95,"m"],[181,88,149,96],[181,89,149,97,"presence_ref"],[181,101,149,109],[181,102,149,110],[181,105,149,113],[181,106,149,114],[181,107,149,115],[182,10,150,16,"state"],[182,15,150,21],[182,16,150,22,"key"],[182,19,150,25],[182,20,150,26],[182,21,150,27,"unshift"],[182,28,150,34],[182,29,150,35],[182,32,150,38,"curPresences"],[182,44,150,50],[182,45,150,51],[183,8,151,12],[184,8,152,12,"onJoin"],[184,14,152,18],[184,15,152,19,"key"],[184,18,152,22],[184,20,152,24,"currentPresences"],[184,36,152,40],[184,38,152,42,"newPresences"],[184,50,152,54],[184,51,152,55],[185,6,153,8],[185,7,153,9],[185,8,153,10],[186,6,154,8],[186,10,154,12],[186,11,154,13,"map"],[186,14,154,16],[186,15,154,17,"leaves"],[186,21,154,23],[186,23,154,25],[186,24,154,26,"key"],[186,27,154,29],[186,29,154,31,"leftPresences"],[186,42,154,44],[186,47,154,49],[187,8,155,12],[187,12,155,16,"currentPresences"],[187,28,155,32],[187,31,155,35,"state"],[187,36,155,40],[187,37,155,41,"key"],[187,40,155,44],[187,41,155,45],[188,8,156,12],[188,12,156,16],[188,13,156,17,"currentPresences"],[188,29,156,33],[188,31,157,16],[189,8,158,12],[189,14,158,18,"presenceRefsToRemove"],[189,34,158,38],[189,37,158,41,"leftPresences"],[189,50,158,54],[189,51,158,55,"map"],[189,54,158,58],[189,55,158,60,"m"],[189,56,158,61],[189,60,158,66,"m"],[189,61,158,67],[189,62,158,68,"presence_ref"],[189,74,158,80],[189,75,158,81],[190,8,159,12,"currentPresences"],[190,24,159,28],[190,27,159,31,"currentPresences"],[190,43,159,47],[190,44,159,48,"filter"],[190,50,159,54],[190,51,159,56,"m"],[190,52,159,57],[190,56,159,62,"presenceRefsToRemove"],[190,76,159,82],[190,77,159,83,"indexOf"],[190,84,159,90],[190,85,159,91,"m"],[190,86,159,92],[190,87,159,93,"presence_ref"],[190,99,159,105],[190,100,159,106],[190,103,159,109],[190,104,159,110],[190,105,159,111],[191,8,160,12,"state"],[191,13,160,17],[191,14,160,18,"key"],[191,17,160,21],[191,18,160,22],[191,21,160,25,"currentPresences"],[191,37,160,41],[192,8,161,12,"onLeave"],[192,15,161,19],[192,16,161,20,"key"],[192,19,161,23],[192,21,161,25,"currentPresences"],[192,37,161,41],[192,39,161,43,"leftPresences"],[192,52,161,56],[192,53,161,57],[193,8,162,12],[193,12,162,16,"currentPresences"],[193,28,162,32],[193,29,162,33,"length"],[193,35,162,39],[193,40,162,44],[193,41,162,45],[193,43,163,16],[193,50,163,23,"state"],[193,55,163,28],[193,56,163,29,"key"],[193,59,163,32],[193,60,163,33],[194,6,164,8],[194,7,164,9],[194,8,164,10],[195,6,165,8],[195,13,165,15,"state"],[195,18,165,20],[196,4,166,4],[197,4,167,4],[198,4,168,4],[198,11,168,11,"map"],[198,14,168,14,"map"],[198,15,168,15,"obj"],[198,18,168,18],[198,20,168,20,"func"],[198,24,168,24],[198,26,168,26],[199,6,169,8],[199,13,169,15,"Object"],[199,19,169,21],[199,20,169,22,"getOwnPropertyNames"],[199,39,169,41],[199,40,169,42,"obj"],[199,43,169,45],[199,44,169,46],[199,45,169,47,"map"],[199,48,169,50],[199,49,169,52,"key"],[199,52,169,55],[199,56,169,60,"func"],[199,60,169,64],[199,61,169,65,"key"],[199,64,169,68],[199,66,169,70,"obj"],[199,69,169,73],[199,70,169,74,"key"],[199,73,169,77],[199,74,169,78],[199,75,169,79],[199,76,169,80],[200,4,170,4],[201,4,171,4],[202,0,172,0],[203,0,173,0],[204,0,174,0],[205,0,175,0],[206,0,176,0],[207,0,177,0],[208,0,178,0],[209,0,179,0],[210,0,180,0],[211,0,181,0],[212,0,182,0],[213,0,183,0],[214,0,184,0],[215,0,185,0],[216,0,186,0],[217,0,187,0],[218,0,188,0],[219,0,189,0],[220,0,190,0],[221,0,191,0],[222,0,192,0],[223,0,193,0],[224,4,194,4],[224,11,194,11,"transformState"],[224,25,194,25,"transformState"],[224,26,194,26,"state"],[224,31,194,31],[224,33,194,33],[225,6,195,8,"state"],[225,11,195,13],[225,14,195,16],[225,18,195,20],[225,19,195,21,"cloneDeep"],[225,28,195,30],[225,29,195,31,"state"],[225,34,195,36],[225,35,195,37],[226,6,196,8],[226,13,196,15,"Object"],[226,19,196,21],[226,20,196,22,"getOwnPropertyNames"],[226,39,196,41],[226,40,196,42,"state"],[226,45,196,47],[226,46,196,48],[226,47,196,49,"reduce"],[226,53,196,55],[226,54,196,56],[226,55,196,57,"newState"],[226,63,196,65],[226,65,196,67,"key"],[226,68,196,70],[226,73,196,75],[227,8,197,12],[227,14,197,18,"presences"],[227,23,197,27],[227,26,197,30,"state"],[227,31,197,35],[227,32,197,36,"key"],[227,35,197,39],[227,36,197,40],[228,8,198,12],[228,12,198,16],[228,19,198,23],[228,23,198,27,"presences"],[228,32,198,36],[228,34,198,38],[229,10,199,16,"newState"],[229,18,199,24],[229,19,199,25,"key"],[229,22,199,28],[229,23,199,29],[229,26,199,32,"presences"],[229,35,199,41],[229,36,199,42,"metas"],[229,41,199,47],[229,42,199,48,"map"],[229,45,199,51],[229,46,199,53,"presence"],[229,54,199,61],[229,58,199,66],[230,12,200,20,"presence"],[230,20,200,28],[230,21,200,29],[230,35,200,43],[230,36,200,44],[230,39,200,47,"presence"],[230,47,200,55],[230,48,200,56],[230,57,200,65],[230,58,200,66],[231,12,201,20],[231,19,201,27,"presence"],[231,27,201,35],[231,28,201,36],[231,37,201,45],[231,38,201,46],[232,12,202,20],[232,19,202,27,"presence"],[232,27,202,35],[232,28,202,36],[232,42,202,50],[232,43,202,51],[233,12,203,20],[233,19,203,27,"presence"],[233,27,203,35],[234,10,204,16],[234,11,204,17],[234,12,204,18],[235,8,205,12],[235,9,205,13],[235,15,206,17],[236,10,207,16,"newState"],[236,18,207,24],[236,19,207,25,"key"],[236,22,207,28],[236,23,207,29],[236,26,207,32,"presences"],[236,35,207,41],[237,8,208,12],[238,8,209,12],[238,15,209,19,"newState"],[238,23,209,27],[239,6,210,8],[239,7,210,9],[239,9,210,11],[239,10,210,12],[239,11,210,13],[239,12,210,14],[240,4,211,4],[241,4,212,4],[242,4,213,4],[242,11,213,11,"cloneDeep"],[242,20,213,20,"cloneDeep"],[242,21,213,21,"obj"],[242,24,213,24],[242,26,213,26],[243,6,214,8],[243,13,214,15,"JSON"],[243,17,214,19],[243,18,214,20,"parse"],[243,23,214,25],[243,24,214,26,"JSON"],[243,28,214,30],[243,29,214,31,"stringify"],[243,38,214,40],[243,39,214,41,"obj"],[243,42,214,44],[243,43,214,45],[243,44,214,46],[244,4,215,4],[245,4,216,4],[246,4,217,4,"onJoin"],[246,10,217,10,"onJoin"],[246,11,217,11,"callback"],[246,19,217,19],[246,21,217,21],[247,6,218,8],[247,10,218,12],[247,11,218,13,"caller"],[247,17,218,19],[247,18,218,20,"onJoin"],[247,24,218,26],[247,27,218,29,"callback"],[247,35,218,37],[248,4,219,4],[249,4,220,4],[250,4,221,4,"onLeave"],[250,11,221,11,"onLeave"],[250,12,221,12,"callback"],[250,20,221,20],[250,22,221,22],[251,6,222,8],[251,10,222,12],[251,11,222,13,"caller"],[251,17,222,19],[251,18,222,20,"onLeave"],[251,25,222,27],[251,28,222,30,"callback"],[251,36,222,38],[252,4,223,4],[253,4,224,4],[254,4,225,4,"onSync"],[254,10,225,10,"onSync"],[254,11,225,11,"callback"],[254,19,225,19],[254,21,225,21],[255,6,226,8],[255,10,226,12],[255,11,226,13,"caller"],[255,17,226,19],[255,18,226,20,"onSync"],[255,24,226,26],[255,27,226,29,"callback"],[255,35,226,37],[256,4,227,4],[257,4,228,4],[258,4,229,4,"inPendingSyncState"],[258,22,229,22,"inPendingSyncState"],[258,23,229,22],[258,25,229,25],[259,6,230,8],[259,13,230,15],[259,14,230,16],[259,18,230,20],[259,19,230,21,"joinRef"],[259,26,230,28],[259,30,230,32],[259,34,230,36],[259,35,230,37,"joinRef"],[259,42,230,44],[259,47,230,49],[259,51,230,53],[259,52,230,54,"channel"],[259,59,230,61],[259,60,230,62,"_joinRef"],[259,68,230,70],[259,69,230,71],[259,70,230,72],[260,4,231,4],[261,2,232,0],[262,0,232,1],[262,3]],"functionMap":{"names":["<global>","<anonymous>","RealtimePresence","constructor","caller.onJoin","caller.onLeave","caller.onSync","channel._on$argument_2","pendingDiffs.forEach$argument_0","onJoin$argument_0","onLeave$argument_0","onSync$argument_0","syncState","map$argument_1","newPresences.map$argument_0","currentPresences.map$argument_0","newPresences.filter$argument_0","currentPresences.filter$argument_0","syncDiff","onJoin","onLeave","state.key.map$argument_0","leftPresences.map$argument_0","map","Object.getOwnPropertyNames.map$argument_0","transformState","Object.getOwnPropertyNames.reduce$argument_0","presences.metas.map$argument_0","cloneDeep","onSync","inPendingSyncState"],"mappings":"AAA;CCK;CDI;eEC;ICgB;oBCO,SD;qBEC,SF;oBGC,SH;2CIM;sCCI;aDE;SJG;0CIC;SJS;oBMC;SNO;qBOC;SPO;oBQC;SRE;KDC;IUW;wBCK;SDI;mCCC;yDCG,qBD;6DEC,qBF;4DGC,kDH;8DIC,kDJ;SDW;KVE;IgBW;qBCM,SD;sBEG,SF;wBLE;0DQK,qBR;6DIC,qDJ;SKI;yBLC;2DSI,qBT;uDIC,uDJ;SKK;KhBE;IqBE;mDCC,4BD;KrBC;IuBwB;wDCE;oDCG;iBDK;SDM;KvBC;I0BE;K1BE;IiBE;KjBE;IkBE;KlBE;I2BE;K3BE;I4BE;K5BE;CFC"},"hasCjsExports":false},"type":"js/module"}]}