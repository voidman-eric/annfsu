{"dependencies":[{"name":"expo","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"PWvtvXU7MaET6Yd1Gn8oQOXJQ8A=","exportNames":["*"],"imports":1}},{"name":"../ImageManipulator.types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":35},"end":{"line":3,"column":81,"index":116}}],"key":"we/+JaAMOU0m3RKMiFhb4NAarVM=","exportNames":["*"],"imports":1}},{"name":"./utils.web","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":117},"end":{"line":4,"column":49,"index":166}}],"key":"EUegP4QQ6V+YZMXwkMptx1Qg28Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return ImageManipulatorImageRef;\n    }\n  });\n  var _expo = require(_dependencyMap[0], \"expo\");\n  var _ImageManipulatorTypes = require(_dependencyMap[1], \"../ImageManipulator.types\");\n  var _utilsWeb = require(_dependencyMap[2], \"./utils.web\");\n  class ImageManipulatorImageRef extends _expo.SharedRef {\n    nativeRefType = 'image';\n    constructor(uri, canvas) {\n      super();\n      this.uri = uri;\n      this.canvas = canvas;\n    }\n    get width() {\n      return this.canvas.width;\n    }\n    get height() {\n      return this.canvas.height;\n    }\n    async saveAsync(options = {\n      base64: false\n    }) {\n      return new Promise((resolve, reject) => {\n        this.canvas.toBlob(async blob => {\n          if (!blob) {\n            return reject(new Error(`Unable to save image: ${this.uri}`));\n          }\n          const base64 = options.base64 ? await (0, _utilsWeb.blobToBase64String)(blob) : undefined;\n          const uri = URL.createObjectURL(blob);\n          resolve({\n            uri,\n            width: this.width,\n            height: this.height,\n            base64\n          });\n        }, `image/${options.format ?? _ImageManipulatorTypes.SaveFormat.JPEG}`, options.compress);\n      });\n    }\n  }\n});","lineCount":49,"map":[[7,2,6,15,"Object"],[7,8,6,15],[7,9,6,15,"defineProperty"],[7,23,6,15],[7,24,6,15,"exports"],[7,31,6,15],[8,4,6,15,"enumerable"],[8,14,6,15],[9,4,6,15,"get"],[9,7,6,15],[9,18,6,15,"get"],[9,19,6,15],[10,6,6,15],[10,13,6,15,"ImageManipulatorImageRef"],[10,37,6,15],[11,4,6,15],[12,2,6,15],[13,2,1,0],[13,6,1,0,"_expo"],[13,11,1,0],[13,14,1,0,"require"],[13,21,1,0],[13,22,1,0,"_dependencyMap"],[13,36,1,0],[14,2,3,0],[14,6,3,0,"_ImageManipulatorTypes"],[14,28,3,0],[14,31,3,0,"require"],[14,38,3,0],[14,39,3,0,"_dependencyMap"],[14,53,3,0],[15,2,4,0],[15,6,4,0,"_utilsWeb"],[15,15,4,0],[15,18,4,0,"require"],[15,25,4,0],[15,26,4,0,"_dependencyMap"],[15,40,4,0],[16,2,6,15],[16,8,6,21,"ImageManipulatorImageRef"],[16,32,6,45],[16,41,6,54,"SharedRef"],[16,46,6,63],[16,47,6,63,"SharedRef"],[16,56,6,63],[16,57,6,73],[17,4,7,11,"nativeRefType"],[17,17,7,24],[17,20,7,35],[17,27,7,42],[18,4,12,2,"constructor"],[18,15,12,13,"constructor"],[18,16,12,14,"uri"],[18,19,12,25],[18,21,12,27,"canvas"],[18,27,12,52],[18,29,12,54],[19,6,13,4],[19,11,13,9],[19,12,13,10],[19,13,13,11],[20,6,14,4],[20,10,14,8],[20,11,14,9,"uri"],[20,14,14,12],[20,17,14,15,"uri"],[20,20,14,18],[21,6,15,4],[21,10,15,8],[21,11,15,9,"canvas"],[21,17,15,15],[21,20,15,18,"canvas"],[21,26,15,24],[22,4,16,2],[23,4,18,2],[23,8,18,6,"width"],[23,13,18,11,"width"],[23,14,18,11],[23,16,18,14],[24,6,19,4],[24,13,19,11],[24,17,19,15],[24,18,19,16,"canvas"],[24,24,19,22],[24,25,19,23,"width"],[24,30,19,28],[25,4,20,2],[26,4,22,2],[26,8,22,6,"height"],[26,14,22,12,"height"],[26,15,22,12],[26,17,22,15],[27,6,23,4],[27,13,23,11],[27,17,23,15],[27,18,23,16,"canvas"],[27,24,23,22],[27,25,23,23,"height"],[27,31,23,29],[28,4,24,2],[29,4,26,2],[29,10,26,8,"saveAsync"],[29,19,26,17,"saveAsync"],[29,20,26,18,"options"],[29,27,26,38],[29,30,26,41],[30,6,26,43,"base64"],[30,12,26,49],[30,14,26,51],[31,4,26,57],[31,5,26,58],[31,7,26,82],[32,6,27,4],[32,13,27,11],[32,17,27,15,"Promise"],[32,24,27,22],[32,25,27,23],[32,26,27,24,"resolve"],[32,33,27,31],[32,35,27,33,"reject"],[32,41,27,39],[32,46,27,44],[33,8,28,6],[33,12,28,10],[33,13,28,11,"canvas"],[33,19,28,17],[33,20,28,18,"toBlob"],[33,26,28,24],[33,27,29,8],[33,33,29,15,"blob"],[33,37,29,19],[33,41,29,24],[34,10,30,10],[34,14,30,14],[34,15,30,15,"blob"],[34,19,30,19],[34,21,30,21],[35,12,31,12],[35,19,31,19,"reject"],[35,25,31,25],[35,26,31,26],[35,30,31,30,"Error"],[35,35,31,35],[35,36,31,36],[35,61,31,61],[35,65,31,65],[35,66,31,66,"uri"],[35,69,31,69],[35,71,31,71],[35,72,31,72],[35,73,31,73],[36,10,32,10],[37,10,33,10],[37,16,33,16,"base64"],[37,22,33,22],[37,25,33,25,"options"],[37,32,33,32],[37,33,33,33,"base64"],[37,39,33,39],[37,42,33,42],[37,48,33,48],[37,52,33,48,"blobToBase64String"],[37,61,33,66],[37,62,33,66,"blobToBase64String"],[37,80,33,66],[37,82,33,67,"blob"],[37,86,33,71],[37,87,33,72],[37,90,33,75,"undefined"],[37,99,33,84],[38,10,34,10],[38,16,34,16,"uri"],[38,19,34,19],[38,22,34,22,"URL"],[38,25,34,25],[38,26,34,26,"createObjectURL"],[38,41,34,41],[38,42,34,42,"blob"],[38,46,34,46],[38,47,34,47],[39,10,36,10,"resolve"],[39,17,36,17],[39,18,36,18],[40,12,37,12,"uri"],[40,15,37,15],[41,12,38,12,"width"],[41,17,38,17],[41,19,38,19],[41,23,38,23],[41,24,38,24,"width"],[41,29,38,29],[42,12,39,12,"height"],[42,18,39,18],[42,20,39,20],[42,24,39,24],[42,25,39,25,"height"],[42,31,39,31],[43,12,40,12,"base64"],[44,10,41,10],[44,11,41,11],[44,12,41,12],[45,8,42,8],[45,9,42,9],[45,11,43,8],[45,20,43,17,"options"],[45,27,43,24],[45,28,43,25,"format"],[45,34,43,31],[45,38,43,35,"SaveFormat"],[45,60,43,45],[45,61,43,45,"SaveFormat"],[45,71,43,45],[45,72,43,46,"JPEG"],[45,76,43,50],[45,78,43,52],[45,80,44,8,"options"],[45,87,44,15],[45,88,44,16,"compress"],[45,96,45,6],[45,97,45,7],[46,6,46,4],[46,7,46,5],[46,8,46,6],[47,4,47,2],[48,2,48,0],[49,0,48,1],[49,3]],"functionMap":{"names":["<global>","ImageManipulatorImageRef","constructor","get__width","get__height","saveAsync","Promise$argument_0","canvas.toBlob$argument_0"],"mappings":"AAA;eCK;ECM;GDI;EEE;GFE;EGE;GHE;EIE;uBCC;QCE;SDa;KDI;GJC;CDC"},"hasCjsExports":false},"type":"js/module"}]}