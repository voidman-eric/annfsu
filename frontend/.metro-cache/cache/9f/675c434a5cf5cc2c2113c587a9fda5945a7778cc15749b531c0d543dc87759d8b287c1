{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        const storedUser = await AsyncStorage.default.getItem('user_data');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const loginWithEmail = async (email, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/login/email`, {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        await AsyncStorage.default.setItem('user_data', JSON.stringify(userData));\n        setToken(access_token);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const loginWithOTP = async (phone, otp) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/verify-otp`, {\n          phone,\n          otp\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        await AsyncStorage.default.setItem('user_data', JSON.stringify(userData));\n        setToken(access_token);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'OTP verification failed');\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('auth_token');\n        await AsyncStorage.default.removeItem('user_data');\n        setToken(null);\n        setUser(null);\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    };\n    const isAdmin = user?.role === 'admin' || user?.role === 'super_admin';\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loginWithEmail,\n        loginWithOTP,\n        logout,\n        isLoading,\n        isAdmin\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"mX4/AXRUN66G8j/NKXHYWKblzjI=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":127,"map":[[15,2,36,0,"exports"],[15,9,36,0],[15,10,36,0,"AuthProvider"],[15,22,36,0],[15,25,36,0,"AuthProvider"],[15,37,36,0],[16,2,119,0,"exports"],[16,9,119,0],[16,10,119,0,"useAuth"],[16,17,119,0],[16,20,119,0,"useAuth"],[16,27,119,0],[17,2,125,1],[17,6,125,1,"_expoVirtualEnv"],[17,21,125,1],[17,24,125,1,"require"],[17,31,125,1],[17,32,125,1,"_dependencyMap"],[17,46,125,1],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,3,0],[21,6,3,0,"_axios"],[21,12,3,0],[21,15,3,0,"require"],[21,22,3,0],[21,23,3,0,"_dependencyMap"],[21,37,3,0],[22,2,3,0],[22,6,3,0,"axios"],[22,11,3,0],[22,14,3,0,"_interopDefault"],[22,29,3,0],[22,30,3,0,"_axios"],[22,36,3,0],[23,2,3,26],[23,6,3,26,"_reactJsxDevRuntime"],[23,25,3,26],[23,28,3,26,"require"],[23,35,3,26],[23,36,3,26,"_dependencyMap"],[23,50,3,26],[24,2,5,0],[24,8,5,6,"API_URL"],[24,15,5,13],[24,18,5,13,"_expoVirtualEnv"],[24,33,5,13],[24,34,5,13,"env"],[24,37,5,13],[24,38,5,13,"EXPO_PUBLIC_BACKEND_URL"],[24,61,5,51],[25,2,34,0],[25,8,34,6,"AuthContext"],[25,19,34,17],[25,35,34,20],[25,39,34,20,"createContext"],[25,45,34,33],[25,46,34,33,"createContext"],[25,59,34,33],[25,61,34,63,"undefined"],[25,70,34,72],[25,71,34,73],[26,2,36,7],[26,11,36,16,"AuthProvider"],[26,23,36,28,"AuthProvider"],[26,24,36,29],[27,4,36,31,"children"],[28,2,36,71],[28,3,36,72],[28,5,36,74],[29,4,36,74,"_s"],[29,6,36,74],[30,4,37,2],[30,10,37,8],[30,11,37,9,"user"],[30,15,37,13],[30,17,37,15,"setUser"],[30,24,37,22],[30,25,37,23],[30,28,37,26],[30,32,37,26,"useState"],[30,38,37,34],[30,39,37,34,"useState"],[30,47,37,34],[30,49,37,48],[30,53,37,52],[30,54,37,53],[31,4,38,2],[31,10,38,8],[31,11,38,9,"token"],[31,16,38,14],[31,18,38,16,"setToken"],[31,26,38,24],[31,27,38,25],[31,30,38,28],[31,34,38,28,"useState"],[31,40,38,36],[31,41,38,36,"useState"],[31,49,38,36],[31,51,38,52],[31,55,38,56],[31,56,38,57],[32,4,39,2],[32,10,39,8],[32,11,39,9,"isLoading"],[32,20,39,18],[32,22,39,20,"setIsLoading"],[32,34,39,32],[32,35,39,33],[32,38,39,36],[32,42,39,36,"useState"],[32,48,39,44],[32,49,39,44,"useState"],[32,57,39,44],[32,59,39,45],[32,63,39,49],[32,64,39,50],[33,4,41,2],[33,8,41,2,"useEffect"],[33,14,41,11],[33,15,41,11,"useEffect"],[33,24,41,11],[33,26,41,12],[33,32,41,18],[34,6,42,4,"loadStoredAuth"],[34,20,42,18],[34,21,42,19],[34,22,42,20],[35,4,43,2],[35,5,43,3],[35,7,43,5],[35,9,43,7],[35,10,43,8],[36,4,45,2],[36,10,45,8,"loadStoredAuth"],[36,24,45,22],[36,27,45,25],[36,33,45,25,"loadStoredAuth"],[36,34,45,25],[36,39,45,37],[37,6,46,4],[37,10,46,8],[38,8,47,6],[38,14,47,12,"storedToken"],[38,25,47,23],[38,28,47,26],[38,34,47,32,"AsyncStorage"],[38,46,47,44],[38,47,47,44,"default"],[38,54,47,44],[38,55,47,45,"getItem"],[38,62,47,52],[38,63,47,53],[38,75,47,65],[38,76,47,66],[39,8,48,6],[39,14,48,12,"storedUser"],[39,24,48,22],[39,27,48,25],[39,33,48,31,"AsyncStorage"],[39,45,48,43],[39,46,48,43,"default"],[39,53,48,43],[39,54,48,44,"getItem"],[39,61,48,51],[39,62,48,52],[39,73,48,63],[39,74,48,64],[40,8,50,6],[40,12,50,10,"storedToken"],[40,23,50,21],[40,27,50,25,"storedUser"],[40,37,50,35],[40,39,50,37],[41,10,51,8,"setToken"],[41,18,51,16],[41,19,51,17,"storedToken"],[41,30,51,28],[41,31,51,29],[42,10,52,8,"setUser"],[42,17,52,15],[42,18,52,16,"JSON"],[42,22,52,20],[42,23,52,21,"parse"],[42,28,52,26],[42,29,52,27,"storedUser"],[42,39,52,37],[42,40,52,38],[42,41,52,39],[43,8,53,6],[44,6,54,4],[44,7,54,5],[44,8,54,6],[44,15,54,13,"error"],[44,20,54,18],[44,22,54,20],[45,8,55,6,"console"],[45,15,55,13],[45,16,55,14,"error"],[45,21,55,19],[45,22,55,20],[45,43,55,41],[45,45,55,43,"error"],[45,50,55,48],[45,51,55,49],[46,6,56,4],[46,7,56,5],[46,16,56,14],[47,8,57,6,"setIsLoading"],[47,20,57,18],[47,21,57,19],[47,26,57,24],[47,27,57,25],[48,6,58,4],[49,4,59,2],[49,5,59,3],[50,4,61,2],[50,10,61,8,"loginWithEmail"],[50,24,61,22],[50,27,61,25],[50,33,61,25,"loginWithEmail"],[50,34,61,32,"email"],[50,39,61,45],[50,41,61,47,"password"],[50,49,61,63],[50,54,61,68],[51,6,62,4],[51,10,62,8],[52,8,63,6],[52,14,63,12,"response"],[52,22,63,20],[52,25,63,23],[52,31,63,29,"axios"],[52,36,63,34],[52,37,63,34,"default"],[52,44,63,34],[52,45,63,35,"post"],[52,49,63,39],[52,50,63,40],[52,53,63,43,"API_URL"],[52,60,63,50],[52,83,63,73],[52,85,63,75],[53,10,64,8,"email"],[53,15,64,13],[54,10,65,8,"password"],[55,8,66,6],[55,9,66,7],[55,10,66,8],[56,8,68,6],[56,14,68,12],[57,10,68,14,"access_token"],[57,22,68,26],[58,10,68,28,"user"],[58,14,68,32],[58,16,68,34,"userData"],[59,8,68,43],[59,9,68,44],[59,12,68,47,"response"],[59,20,68,55],[59,21,68,56,"data"],[59,25,68,60],[60,8,70,6],[60,14,70,12,"AsyncStorage"],[60,26,70,24],[60,27,70,24,"default"],[60,34,70,24],[60,35,70,25,"setItem"],[60,42,70,32],[60,43,70,33],[60,55,70,45],[60,57,70,47,"access_token"],[60,69,70,59],[60,70,70,60],[61,8,71,6],[61,14,71,12,"AsyncStorage"],[61,26,71,24],[61,27,71,24,"default"],[61,34,71,24],[61,35,71,25,"setItem"],[61,42,71,32],[61,43,71,33],[61,54,71,44],[61,56,71,46,"JSON"],[61,60,71,50],[61,61,71,51,"stringify"],[61,70,71,60],[61,71,71,61,"userData"],[61,79,71,69],[61,80,71,70],[61,81,71,71],[62,8,73,6,"setToken"],[62,16,73,14],[62,17,73,15,"access_token"],[62,29,73,27],[62,30,73,28],[63,8,74,6,"setUser"],[63,15,74,13],[63,16,74,14,"userData"],[63,24,74,22],[63,25,74,23],[64,6,75,4],[64,7,75,5],[64,8,75,6],[64,15,75,13,"error"],[64,20,75,23],[64,22,75,25],[65,8,76,6],[65,14,76,12],[65,18,76,16,"Error"],[65,23,76,21],[65,24,76,22,"error"],[65,29,76,27],[65,30,76,28,"response"],[65,38,76,36],[65,40,76,38,"data"],[65,44,76,42],[65,46,76,44,"detail"],[65,52,76,50],[65,56,76,54],[65,70,76,68],[65,71,76,69],[66,6,77,4],[67,4,78,2],[67,5,78,3],[68,4,80,2],[68,10,80,8,"loginWithOTP"],[68,22,80,20],[68,25,80,23],[68,31,80,23,"loginWithOTP"],[68,32,80,30,"phone"],[68,37,80,43],[68,39,80,45,"otp"],[68,42,80,56],[68,47,80,61],[69,6,81,4],[69,10,81,8],[70,8,82,6],[70,14,82,12,"response"],[70,22,82,20],[70,25,82,23],[70,31,82,29,"axios"],[70,36,82,34],[70,37,82,34,"default"],[70,44,82,34],[70,45,82,35,"post"],[70,49,82,39],[70,50,82,40],[70,53,82,43,"API_URL"],[70,60,82,50],[70,82,82,72],[70,84,82,74],[71,10,83,8,"phone"],[71,15,83,13],[72,10,84,8,"otp"],[73,8,85,6],[73,9,85,7],[73,10,85,8],[74,8,87,6],[74,14,87,12],[75,10,87,14,"access_token"],[75,22,87,26],[76,10,87,28,"user"],[76,14,87,32],[76,16,87,34,"userData"],[77,8,87,43],[77,9,87,44],[77,12,87,47,"response"],[77,20,87,55],[77,21,87,56,"data"],[77,25,87,60],[78,8,89,6],[78,14,89,12,"AsyncStorage"],[78,26,89,24],[78,27,89,24,"default"],[78,34,89,24],[78,35,89,25,"setItem"],[78,42,89,32],[78,43,89,33],[78,55,89,45],[78,57,89,47,"access_token"],[78,69,89,59],[78,70,89,60],[79,8,90,6],[79,14,90,12,"AsyncStorage"],[79,26,90,24],[79,27,90,24,"default"],[79,34,90,24],[79,35,90,25,"setItem"],[79,42,90,32],[79,43,90,33],[79,54,90,44],[79,56,90,46,"JSON"],[79,60,90,50],[79,61,90,51,"stringify"],[79,70,90,60],[79,71,90,61,"userData"],[79,79,90,69],[79,80,90,70],[79,81,90,71],[80,8,92,6,"setToken"],[80,16,92,14],[80,17,92,15,"access_token"],[80,29,92,27],[80,30,92,28],[81,8,93,6,"setUser"],[81,15,93,13],[81,16,93,14,"userData"],[81,24,93,22],[81,25,93,23],[82,6,94,4],[82,7,94,5],[82,8,94,6],[82,15,94,13,"error"],[82,20,94,23],[82,22,94,25],[83,8,95,6],[83,14,95,12],[83,18,95,16,"Error"],[83,23,95,21],[83,24,95,22,"error"],[83,29,95,27],[83,30,95,28,"response"],[83,38,95,36],[83,40,95,38,"data"],[83,44,95,42],[83,46,95,44,"detail"],[83,52,95,50],[83,56,95,54],[83,81,95,79],[83,82,95,80],[84,6,96,4],[85,4,97,2],[85,5,97,3],[86,4,99,2],[86,10,99,8,"logout"],[86,16,99,14],[86,19,99,17],[86,25,99,17,"logout"],[86,26,99,17],[86,31,99,29],[87,6,100,4],[87,10,100,8],[88,8,101,6],[88,14,101,12,"AsyncStorage"],[88,26,101,24],[88,27,101,24,"default"],[88,34,101,24],[88,35,101,25,"removeItem"],[88,45,101,35],[88,46,101,36],[88,58,101,48],[88,59,101,49],[89,8,102,6],[89,14,102,12,"AsyncStorage"],[89,26,102,24],[89,27,102,24,"default"],[89,34,102,24],[89,35,102,25,"removeItem"],[89,45,102,35],[89,46,102,36],[89,57,102,47],[89,58,102,48],[90,8,103,6,"setToken"],[90,16,103,14],[90,17,103,15],[90,21,103,19],[90,22,103,20],[91,8,104,6,"setUser"],[91,15,104,13],[91,16,104,14],[91,20,104,18],[91,21,104,19],[92,6,105,4],[92,7,105,5],[92,8,105,6],[92,15,105,13,"error"],[92,20,105,18],[92,22,105,20],[93,8,106,6,"console"],[93,15,106,13],[93,16,106,14,"error"],[93,21,106,19],[93,22,106,20],[93,37,106,35],[93,39,106,37,"error"],[93,44,106,42],[93,45,106,43],[94,6,107,4],[95,4,108,2],[95,5,108,3],[96,4,110,2],[96,10,110,8,"isAdmin"],[96,17,110,15],[96,20,110,18,"user"],[96,24,110,22],[96,26,110,24,"role"],[96,30,110,28],[96,35,110,33],[96,42,110,40],[96,46,110,44,"user"],[96,50,110,48],[96,52,110,50,"role"],[96,56,110,54],[96,61,110,59],[96,74,110,72],[97,4,112,2],[97,24,113,4],[97,28,113,4,"_reactJsxDevRuntime"],[97,47,113,4],[97,48,113,4,"jsxDEV"],[97,54,113,4],[97,56,113,5,"AuthContext"],[97,67,113,16],[97,68,113,17,"Provider"],[97,76,113,25],[98,6,113,26,"value"],[98,11,113,31],[98,13,113,33],[99,8,113,35,"user"],[99,12,113,39],[100,8,113,41,"token"],[100,13,113,46],[101,8,113,48,"loginWithEmail"],[101,22,113,62],[102,8,113,64,"loginWithOTP"],[102,20,113,76],[103,8,113,78,"logout"],[103,14,113,84],[104,8,113,86,"isLoading"],[104,17,113,95],[105,8,113,97,"isAdmin"],[106,6,113,105],[106,7,113,107],[107,6,113,107,"children"],[107,14,113,107],[107,16,114,7,"children"],[108,4,114,15],[109,6,114,15,"fileName"],[109,14,114,15],[109,16,114,15,"_jsxFileName"],[109,28,114,15],[110,6,114,15,"lineNumber"],[110,16,114,15],[111,6,114,15,"columnNumber"],[111,18,114,15],[112,4,114,15],[112,11,115,26],[112,12,115,27],[113,2,117,0],[114,2,117,1,"_s"],[114,4,117,1],[114,5,36,16,"AuthProvider"],[114,17,36,28],[115,2,36,28,"_c"],[115,4,36,28],[115,7,36,16,"AuthProvider"],[115,19,36,28],[116,2,119,7],[116,11,119,16,"useAuth"],[116,18,119,23,"useAuth"],[116,19,119,23],[116,21,119,26],[117,4,119,26,"_s2"],[117,7,119,26],[118,4,120,2],[118,10,120,8,"context"],[118,17,120,15],[118,20,120,18],[118,24,120,18,"useContext"],[118,30,120,28],[118,31,120,28,"useContext"],[118,41,120,28],[118,43,120,29,"AuthContext"],[118,54,120,40],[118,55,120,41],[119,4,121,2],[119,8,121,6,"context"],[119,15,121,13],[119,20,121,18,"undefined"],[119,29,121,27],[119,31,121,29],[120,6,122,4],[120,12,122,10],[120,16,122,14,"Error"],[120,21,122,19],[120,22,122,20],[120,67,122,65],[120,68,122,66],[121,4,123,2],[122,4,124,2],[122,11,124,9,"context"],[122,18,124,16],[123,2,125,0],[124,2,125,1,"_s2"],[124,5,125,1],[124,6,119,16,"useAuth"],[124,13,119,23],[125,2,119,23],[125,6,119,23,"_c"],[125,8,119,23],[126,2,119,23,"$RefreshReg$"],[126,14,119,23],[126,15,119,23,"_c"],[126,17,119,23],[127,0,119,23],[127,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","loginWithEmail","loginWithOTP","logout","useAuth"],"mappings":"AAA;OCmC;YCK;GDE;yBEE;GFc;yBGE;GHiB;uBIE;GJiB;iBKE;GLS;CDS;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}