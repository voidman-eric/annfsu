{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.WebSocketFactory = void 0;\n  /**\n   * Utilities for creating WebSocket instances across runtimes.\n   */\n  class WebSocketFactory {\n    /**\n     * Static-only utility â€“ prevent instantiation.\n     */\n    constructor() {}\n    static detectEnvironment() {\n      var _a;\n      if (typeof WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: globalThis.WebSocket\n        };\n      }\n      if (typeof global !== 'undefined' && typeof global.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: global.WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocketPair !== 'undefined' && typeof globalThis.WebSocket === 'undefined') {\n        return {\n          type: 'cloudflare',\n          error: 'Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.',\n          workaround: 'Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.'\n        };\n      }\n      if (typeof globalThis !== 'undefined' && globalThis.EdgeRuntime || typeof navigator !== 'undefined' && ((_a = navigator.userAgent) === null || _a === void 0 ? void 0 : _a.includes('Vercel-Edge'))) {\n        return {\n          type: 'unsupported',\n          error: 'Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.',\n          workaround: 'Use serverless functions or a different deployment target for WebSocket functionality.'\n        };\n      }\n      if (typeof process !== 'undefined') {\n        // Use dynamic property access to avoid Next.js Edge Runtime static analysis warnings\n        const processVersions = process['versions'];\n        if (processVersions && processVersions['node']) {\n          // Remove 'v' prefix if present and parse the major version\n          const versionString = processVersions['node'];\n          const nodeVersion = parseInt(versionString.replace(/^v/, '').split('.')[0]);\n          // Node.js 22+ should have native WebSocket\n          if (nodeVersion >= 22) {\n            // Check if native WebSocket is available (should be in Node.js 22+)\n            if (typeof globalThis.WebSocket !== 'undefined') {\n              return {\n                type: 'native',\n                constructor: globalThis.WebSocket\n              };\n            }\n            // If not available, user needs to provide it\n            return {\n              type: 'unsupported',\n              error: `Node.js ${nodeVersion} detected but native WebSocket not found.`,\n              workaround: 'Provide a WebSocket implementation via the transport option.'\n            };\n          }\n          // Node.js < 22 doesn't have native WebSocket\n          return {\n            type: 'unsupported',\n            error: `Node.js ${nodeVersion} detected without native WebSocket support.`,\n            workaround: 'For Node.js < 22, install \"ws\" package and provide it via the transport option:\\n' + 'import ws from \"ws\"\\n' + 'new RealtimeClient(url, { transport: ws })'\n          };\n        }\n      }\n      return {\n        type: 'unsupported',\n        error: 'Unknown JavaScript runtime without WebSocket support.',\n        workaround: \"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.\"\n      };\n    }\n    /**\n     * Returns the best available WebSocket constructor for the current runtime.\n     *\n     * @example\n     * ```ts\n     * const WS = WebSocketFactory.getWebSocketConstructor()\n     * const socket = new WS('wss://realtime.supabase.co/socket')\n     * ```\n     */\n    static getWebSocketConstructor() {\n      const env = this.detectEnvironment();\n      if (env.constructor) {\n        return env.constructor;\n      }\n      let errorMessage = env.error || 'WebSocket not supported in this environment.';\n      if (env.workaround) {\n        errorMessage += `\\n\\nSuggested solution: ${env.workaround}`;\n      }\n      throw new Error(errorMessage);\n    }\n    /**\n     * Creates a WebSocket using the detected constructor.\n     *\n     * @example\n     * ```ts\n     * const socket = WebSocketFactory.createWebSocket('wss://realtime.supabase.co/socket')\n     * ```\n     */\n    static createWebSocket(url, protocols) {\n      const WS = this.getWebSocketConstructor();\n      return new WS(url, protocols);\n    }\n    /**\n     * Detects whether the runtime can establish WebSocket connections.\n     *\n     * @example\n     * ```ts\n     * if (!WebSocketFactory.isWebSocketSupported()) {\n     *   console.warn('Falling back to long polling')\n     * }\n     * ```\n     */\n    static isWebSocketSupported() {\n      try {\n        const env = this.detectEnvironment();\n        return env.type === 'native' || env.type === 'ws';\n      } catch (_a) {\n        return false;\n      }\n    }\n  }\n  exports.WebSocketFactory = WebSocketFactory;\n  exports.default = WebSocketFactory;\n});","lineCount":140,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"WebSocketFactory"],[7,26,3,24],[7,29,3,27],[7,34,3,32],[7,35,3,33],[8,2,4,0],[9,0,5,0],[10,0,6,0],[11,2,7,0],[11,8,7,6,"WebSocketFactory"],[11,24,7,22],[11,25,7,23],[12,4,8,4],[13,0,9,0],[14,0,10,0],[15,4,11,4,"constructor"],[15,15,11,15,"constructor"],[15,16,11,15],[15,18,11,18],[15,19,11,20],[16,4,12,4],[16,11,12,11,"detectEnvironment"],[16,28,12,28,"detectEnvironment"],[16,29,12,28],[16,31,12,31],[17,6,13,8],[17,10,13,12,"_a"],[17,12,13,14],[18,6,14,8],[18,10,14,12],[18,17,14,19,"WebSocket"],[18,26,14,28],[18,31,14,33],[18,42,14,44],[18,44,14,46],[19,8,15,12],[19,15,15,19],[20,10,15,21,"type"],[20,14,15,25],[20,16,15,27],[20,24,15,35],[21,10,15,37,"constructor"],[21,21,15,48],[21,23,15,50,"WebSocket"],[22,8,15,60],[22,9,15,61],[23,6,16,8],[24,6,17,8],[24,10,17,12],[24,17,17,19,"globalThis"],[24,27,17,29],[24,32,17,34],[24,43,17,45],[24,47,17,49],[24,54,17,56,"globalThis"],[24,64,17,66],[24,65,17,67,"WebSocket"],[24,74,17,76],[24,79,17,81],[24,90,17,92],[24,92,17,94],[25,8,18,12],[25,15,18,19],[26,10,18,21,"type"],[26,14,18,25],[26,16,18,27],[26,24,18,35],[27,10,18,37,"constructor"],[27,21,18,48],[27,23,18,50,"globalThis"],[27,33,18,60],[27,34,18,61,"WebSocket"],[28,8,18,71],[28,9,18,72],[29,6,19,8],[30,6,20,8],[30,10,20,12],[30,17,20,19,"global"],[30,23,20,25],[30,28,20,30],[30,39,20,41],[30,43,20,45],[30,50,20,52,"global"],[30,56,20,58],[30,57,20,59,"WebSocket"],[30,66,20,68],[30,71,20,73],[30,82,20,84],[30,84,20,86],[31,8,21,12],[31,15,21,19],[32,10,21,21,"type"],[32,14,21,25],[32,16,21,27],[32,24,21,35],[33,10,21,37,"constructor"],[33,21,21,48],[33,23,21,50,"global"],[33,29,21,56],[33,30,21,57,"WebSocket"],[34,8,21,67],[34,9,21,68],[35,6,22,8],[36,6,23,8],[36,10,23,12],[36,17,23,19,"globalThis"],[36,27,23,29],[36,32,23,34],[36,43,23,45],[36,47,24,12],[36,54,24,19,"globalThis"],[36,64,24,29],[36,65,24,30,"WebSocketPair"],[36,78,24,43],[36,83,24,48],[36,94,24,59],[36,98,25,12],[36,105,25,19,"globalThis"],[36,115,25,29],[36,116,25,30,"WebSocket"],[36,125,25,39],[36,130,25,44],[36,141,25,55],[36,143,25,57],[37,8,26,12],[37,15,26,19],[38,10,27,16,"type"],[38,14,27,20],[38,16,27,22],[38,28,27,34],[39,10,28,16,"error"],[39,15,28,21],[39,17,28,23],[39,106,28,112],[40,10,29,16,"workaround"],[40,20,29,26],[40,22,29,28],[41,8,30,12],[41,9,30,13],[42,6,31,8],[43,6,32,8],[43,10,32,13],[43,17,32,20,"globalThis"],[43,27,32,30],[43,32,32,35],[43,43,32,46],[43,47,32,50,"globalThis"],[43,57,32,60],[43,58,32,61,"EdgeRuntime"],[43,69,32,72],[43,73,33,13],[43,80,33,20,"navigator"],[43,89,33,29],[43,94,33,34],[43,105,33,45],[43,110,33,50],[43,111,33,51,"_a"],[43,113,33,53],[43,116,33,56,"navigator"],[43,125,33,65],[43,126,33,66,"userAgent"],[43,135,33,75],[43,141,33,81],[43,145,33,85],[43,149,33,89,"_a"],[43,151,33,91],[43,156,33,96],[43,161,33,101],[43,162,33,102],[43,165,33,105],[43,170,33,110],[43,171,33,111],[43,174,33,114,"_a"],[43,176,33,116],[43,177,33,117,"includes"],[43,185,33,125],[43,186,33,126],[43,199,33,139],[43,200,33,140],[43,201,33,142],[43,203,33,144],[44,8,34,12],[44,15,34,19],[45,10,35,16,"type"],[45,14,35,20],[45,16,35,22],[45,29,35,35],[46,10,36,16,"error"],[46,15,36,21],[46,17,36,23],[46,116,36,122],[47,10,37,16,"workaround"],[47,20,37,26],[47,22,37,28],[48,8,38,12],[48,9,38,13],[49,6,39,8],[50,6,40,8],[50,10,40,12],[50,17,40,19,"process"],[50,24,40,26],[50,29,40,31],[50,40,40,42],[50,42,40,44],[51,8,41,12],[52,8,42,12],[52,14,42,18,"processVersions"],[52,29,42,33],[52,32,42,36,"process"],[52,39,42,43],[52,40,42,44],[52,50,42,54],[52,51,42,55],[53,8,43,12],[53,12,43,16,"processVersions"],[53,27,43,31],[53,31,43,35,"processVersions"],[53,46,43,50],[53,47,43,51],[53,53,43,57],[53,54,43,58],[53,56,43,60],[54,10,44,16],[55,10,45,16],[55,16,45,22,"versionString"],[55,29,45,35],[55,32,45,38,"processVersions"],[55,47,45,53],[55,48,45,54],[55,54,45,60],[55,55,45,61],[56,10,46,16],[56,16,46,22,"nodeVersion"],[56,27,46,33],[56,30,46,36,"parseInt"],[56,38,46,44],[56,39,46,45,"versionString"],[56,52,46,58],[56,53,46,59,"replace"],[56,60,46,66],[56,61,46,67],[56,65,46,71],[56,67,46,73],[56,69,46,75],[56,70,46,76],[56,71,46,77,"split"],[56,76,46,82],[56,77,46,83],[56,80,46,86],[56,81,46,87],[56,82,46,88],[56,83,46,89],[56,84,46,90],[56,85,46,91],[57,10,47,16],[58,10,48,16],[58,14,48,20,"nodeVersion"],[58,25,48,31],[58,29,48,35],[58,31,48,37],[58,33,48,39],[59,12,49,20],[60,12,50,20],[60,16,50,24],[60,23,50,31,"globalThis"],[60,33,50,41],[60,34,50,42,"WebSocket"],[60,43,50,51],[60,48,50,56],[60,59,50,67],[60,61,50,69],[61,14,51,24],[61,21,51,31],[62,16,51,33,"type"],[62,20,51,37],[62,22,51,39],[62,30,51,47],[63,16,51,49,"constructor"],[63,27,51,60],[63,29,51,62,"globalThis"],[63,39,51,72],[63,40,51,73,"WebSocket"],[64,14,51,83],[64,15,51,84],[65,12,52,20],[66,12,53,20],[67,12,54,20],[67,19,54,27],[68,14,55,24,"type"],[68,18,55,28],[68,20,55,30],[68,33,55,43],[69,14,56,24,"error"],[69,19,56,29],[69,21,56,31],[69,32,56,42,"nodeVersion"],[69,43,56,53],[69,86,56,96],[70,14,57,24,"workaround"],[70,24,57,34],[70,26,57,36],[71,12,58,20],[71,13,58,21],[72,10,59,16],[73,10,60,16],[74,10,61,16],[74,17,61,23],[75,12,62,20,"type"],[75,16,62,24],[75,18,62,26],[75,31,62,39],[76,12,63,20,"error"],[76,17,63,25],[76,19,63,27],[76,30,63,38,"nodeVersion"],[76,41,63,49],[76,86,63,94],[77,12,64,20,"workaround"],[77,22,64,30],[77,24,64,32],[77,107,64,115],[77,110,65,24],[77,133,65,47],[77,136,66,24],[78,10,67,16],[78,11,67,17],[79,8,68,12],[80,6,69,8],[81,6,70,8],[81,13,70,15],[82,8,71,12,"type"],[82,12,71,16],[82,14,71,18],[82,27,71,31],[83,8,72,12,"error"],[83,13,72,17],[83,15,72,19],[83,70,72,74],[84,8,73,12,"workaround"],[84,18,73,22],[84,20,73,24],[85,6,74,8],[85,7,74,9],[86,4,75,4],[87,4,76,4],[88,0,77,0],[89,0,78,0],[90,0,79,0],[91,0,80,0],[92,0,81,0],[93,0,82,0],[94,0,83,0],[95,0,84,0],[96,4,85,4],[96,11,85,11,"getWebSocketConstructor"],[96,34,85,34,"getWebSocketConstructor"],[96,35,85,34],[96,37,85,37],[97,6,86,8],[97,12,86,14,"env"],[97,15,86,17],[97,18,86,20],[97,22,86,24],[97,23,86,25,"detectEnvironment"],[97,40,86,42],[97,41,86,43],[97,42,86,44],[98,6,87,8],[98,10,87,12,"env"],[98,13,87,15],[98,14,87,16,"constructor"],[98,25,87,27],[98,27,87,29],[99,8,88,12],[99,15,88,19,"env"],[99,18,88,22],[99,19,88,23,"constructor"],[99,30,88,34],[100,6,89,8],[101,6,90,8],[101,10,90,12,"errorMessage"],[101,22,90,24],[101,25,90,27,"env"],[101,28,90,30],[101,29,90,31,"error"],[101,34,90,36],[101,38,90,40],[101,84,90,86],[102,6,91,8],[102,10,91,12,"env"],[102,13,91,15],[102,14,91,16,"workaround"],[102,24,91,26],[102,26,91,28],[103,8,92,12,"errorMessage"],[103,20,92,24],[103,24,92,28],[103,51,92,55,"env"],[103,54,92,58],[103,55,92,59,"workaround"],[103,65,92,69],[103,67,92,71],[104,6,93,8],[105,6,94,8],[105,12,94,14],[105,16,94,18,"Error"],[105,21,94,23],[105,22,94,24,"errorMessage"],[105,34,94,36],[105,35,94,37],[106,4,95,4],[107,4,96,4],[108,0,97,0],[109,0,98,0],[110,0,99,0],[111,0,100,0],[112,0,101,0],[113,0,102,0],[114,0,103,0],[115,4,104,4],[115,11,104,11,"createWebSocket"],[115,26,104,26,"createWebSocket"],[115,27,104,27,"url"],[115,30,104,30],[115,32,104,32,"protocols"],[115,41,104,41],[115,43,104,43],[116,6,105,8],[116,12,105,14,"WS"],[116,14,105,16],[116,17,105,19],[116,21,105,23],[116,22,105,24,"getWebSocketConstructor"],[116,45,105,47],[116,46,105,48],[116,47,105,49],[117,6,106,8],[117,13,106,15],[117,17,106,19,"WS"],[117,19,106,21],[117,20,106,22,"url"],[117,23,106,25],[117,25,106,27,"protocols"],[117,34,106,36],[117,35,106,37],[118,4,107,4],[119,4,108,4],[120,0,109,0],[121,0,110,0],[122,0,111,0],[123,0,112,0],[124,0,113,0],[125,0,114,0],[126,0,115,0],[127,0,116,0],[128,0,117,0],[129,4,118,4],[129,11,118,11,"isWebSocketSupported"],[129,31,118,31,"isWebSocketSupported"],[129,32,118,31],[129,34,118,34],[130,6,119,8],[130,10,119,12],[131,8,120,12],[131,14,120,18,"env"],[131,17,120,21],[131,20,120,24],[131,24,120,28],[131,25,120,29,"detectEnvironment"],[131,42,120,46],[131,43,120,47],[131,44,120,48],[132,8,121,12],[132,15,121,19,"env"],[132,18,121,22],[132,19,121,23,"type"],[132,23,121,27],[132,28,121,32],[132,36,121,40],[132,40,121,44,"env"],[132,43,121,47],[132,44,121,48,"type"],[132,48,121,52],[132,53,121,57],[132,57,121,61],[133,6,122,8],[133,7,122,9],[133,8,123,8],[133,15,123,15,"_a"],[133,17,123,17],[133,19,123,19],[134,8,124,12],[134,15,124,19],[134,20,124,24],[135,6,125,8],[136,4,126,4],[137,2,127,0],[138,2,128,0,"exports"],[138,9,128,7],[138,10,128,8,"WebSocketFactory"],[138,26,128,24],[138,29,128,27,"WebSocketFactory"],[138,45,128,43],[139,2,129,0,"exports"],[139,9,129,7],[139,10,129,8,"default"],[139,17,129,15],[139,20,129,18,"WebSocketFactory"],[139,36,129,34],[140,0,129,35],[140,3]],"functionMap":{"names":["<global>","WebSocketFactory","WebSocketFactory#constructor","WebSocketFactory.detectEnvironment","WebSocketFactory.getWebSocketConstructor","WebSocketFactory.createWebSocket","WebSocketFactory.isWebSocketSupported"],"mappings":"AAA;ACM;ICI,iBD;IEC;KF+D;IGU;KHU;IIS;KJG;IKW;KLQ;CDC"},"hasCjsExports":true},"type":"js/module"}]}