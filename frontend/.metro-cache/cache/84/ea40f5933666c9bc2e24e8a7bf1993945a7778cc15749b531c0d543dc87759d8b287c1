{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        const storedUser = await AsyncStorage.default.getItem('user_data');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const loginWithEmail = async (email, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/login/email`, {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        await AsyncStorage.default.setItem('user_data', JSON.stringify(userData));\n        setToken(access_token);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const loginWithOTP = async (phone, otp) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/verify-otp`, {\n          phone,\n          otp\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        await AsyncStorage.default.setItem('user_data', JSON.stringify(userData));\n        setToken(access_token);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'OTP verification failed');\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('auth_token');\n        await AsyncStorage.default.removeItem('user_data');\n        setToken(null);\n        setUser(null);\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    };\n    const isAdmin = user?.role === 'admin' || user?.role === 'super_admin';\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loginWithEmail,\n        loginWithOTP,\n        logout,\n        isLoading,\n        isAdmin\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":117,"map":[[13,2,36,0,"exports"],[13,9,36,0],[13,10,36,0,"AuthProvider"],[13,22,36,0],[13,25,36,0,"AuthProvider"],[13,37,36,0],[14,2,119,0,"exports"],[14,9,119,0],[14,10,119,0,"useAuth"],[14,17,119,0],[14,20,119,0,"useAuth"],[14,27,119,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_axios"],[18,12,3,0],[18,15,3,0,"require"],[18,22,3,0],[18,23,3,0,"_dependencyMap"],[18,37,3,0],[19,2,3,0],[19,6,3,0,"axios"],[19,11,3,0],[19,14,3,0,"_interopDefault"],[19,29,3,0],[19,30,3,0,"_axios"],[19,36,3,0],[20,2,3,26],[20,6,3,26,"_reactJsxDevRuntime"],[20,25,3,26],[20,28,3,26,"require"],[20,35,3,26],[20,36,3,26,"_dependencyMap"],[20,50,3,26],[21,2,5,0],[21,8,5,6,"API_URL"],[21,15,5,13],[21,18,5,16,"process"],[21,25,5,23],[21,26,5,24,"env"],[21,29,5,27],[21,30,5,28,"EXPO_PUBLIC_BACKEND_URL"],[21,53,5,51],[22,2,34,0],[22,8,34,6,"AuthContext"],[22,19,34,17],[22,35,34,20],[22,39,34,20,"createContext"],[22,45,34,33],[22,46,34,33,"createContext"],[22,59,34,33],[22,61,34,63,"undefined"],[22,70,34,72],[22,71,34,73],[23,2,36,7],[23,11,36,16,"AuthProvider"],[23,23,36,28,"AuthProvider"],[23,24,36,29],[24,4,36,31,"children"],[25,2,36,71],[25,3,36,72],[25,5,36,74],[26,4,37,2],[26,10,37,8],[26,11,37,9,"user"],[26,15,37,13],[26,17,37,15,"setUser"],[26,24,37,22],[26,25,37,23],[26,28,37,26],[26,32,37,26,"useState"],[26,38,37,34],[26,39,37,34,"useState"],[26,47,37,34],[26,49,37,48],[26,53,37,52],[26,54,37,53],[27,4,38,2],[27,10,38,8],[27,11,38,9,"token"],[27,16,38,14],[27,18,38,16,"setToken"],[27,26,38,24],[27,27,38,25],[27,30,38,28],[27,34,38,28,"useState"],[27,40,38,36],[27,41,38,36,"useState"],[27,49,38,36],[27,51,38,52],[27,55,38,56],[27,56,38,57],[28,4,39,2],[28,10,39,8],[28,11,39,9,"isLoading"],[28,20,39,18],[28,22,39,20,"setIsLoading"],[28,34,39,32],[28,35,39,33],[28,38,39,36],[28,42,39,36,"useState"],[28,48,39,44],[28,49,39,44,"useState"],[28,57,39,44],[28,59,39,45],[28,63,39,49],[28,64,39,50],[29,4,41,2],[29,8,41,2,"useEffect"],[29,14,41,11],[29,15,41,11,"useEffect"],[29,24,41,11],[29,26,41,12],[29,32,41,18],[30,6,42,4,"loadStoredAuth"],[30,20,42,18],[30,21,42,19],[30,22,42,20],[31,4,43,2],[31,5,43,3],[31,7,43,5],[31,9,43,7],[31,10,43,8],[32,4,45,2],[32,10,45,8,"loadStoredAuth"],[32,24,45,22],[32,27,45,25],[32,33,45,25,"loadStoredAuth"],[32,34,45,25],[32,39,45,37],[33,6,46,4],[33,10,46,8],[34,8,47,6],[34,14,47,12,"storedToken"],[34,25,47,23],[34,28,47,26],[34,34,47,32,"AsyncStorage"],[34,46,47,44],[34,47,47,44,"default"],[34,54,47,44],[34,55,47,45,"getItem"],[34,62,47,52],[34,63,47,53],[34,75,47,65],[34,76,47,66],[35,8,48,6],[35,14,48,12,"storedUser"],[35,24,48,22],[35,27,48,25],[35,33,48,31,"AsyncStorage"],[35,45,48,43],[35,46,48,43,"default"],[35,53,48,43],[35,54,48,44,"getItem"],[35,61,48,51],[35,62,48,52],[35,73,48,63],[35,74,48,64],[36,8,50,6],[36,12,50,10,"storedToken"],[36,23,50,21],[36,27,50,25,"storedUser"],[36,37,50,35],[36,39,50,37],[37,10,51,8,"setToken"],[37,18,51,16],[37,19,51,17,"storedToken"],[37,30,51,28],[37,31,51,29],[38,10,52,8,"setUser"],[38,17,52,15],[38,18,52,16,"JSON"],[38,22,52,20],[38,23,52,21,"parse"],[38,28,52,26],[38,29,52,27,"storedUser"],[38,39,52,37],[38,40,52,38],[38,41,52,39],[39,8,53,6],[40,6,54,4],[40,7,54,5],[40,8,54,6],[40,15,54,13,"error"],[40,20,54,18],[40,22,54,20],[41,8,55,6,"console"],[41,15,55,13],[41,16,55,14,"error"],[41,21,55,19],[41,22,55,20],[41,43,55,41],[41,45,55,43,"error"],[41,50,55,48],[41,51,55,49],[42,6,56,4],[42,7,56,5],[42,16,56,14],[43,8,57,6,"setIsLoading"],[43,20,57,18],[43,21,57,19],[43,26,57,24],[43,27,57,25],[44,6,58,4],[45,4,59,2],[45,5,59,3],[46,4,61,2],[46,10,61,8,"loginWithEmail"],[46,24,61,22],[46,27,61,25],[46,33,61,25,"loginWithEmail"],[46,34,61,32,"email"],[46,39,61,45],[46,41,61,47,"password"],[46,49,61,63],[46,54,61,68],[47,6,62,4],[47,10,62,8],[48,8,63,6],[48,14,63,12,"response"],[48,22,63,20],[48,25,63,23],[48,31,63,29,"axios"],[48,36,63,34],[48,37,63,34,"default"],[48,44,63,34],[48,45,63,35,"post"],[48,49,63,39],[48,50,63,40],[48,53,63,43,"API_URL"],[48,60,63,50],[48,83,63,73],[48,85,63,75],[49,10,64,8,"email"],[49,15,64,13],[50,10,65,8,"password"],[51,8,66,6],[51,9,66,7],[51,10,66,8],[52,8,68,6],[52,14,68,12],[53,10,68,14,"access_token"],[53,22,68,26],[54,10,68,28,"user"],[54,14,68,32],[54,16,68,34,"userData"],[55,8,68,43],[55,9,68,44],[55,12,68,47,"response"],[55,20,68,55],[55,21,68,56,"data"],[55,25,68,60],[56,8,70,6],[56,14,70,12,"AsyncStorage"],[56,26,70,24],[56,27,70,24,"default"],[56,34,70,24],[56,35,70,25,"setItem"],[56,42,70,32],[56,43,70,33],[56,55,70,45],[56,57,70,47,"access_token"],[56,69,70,59],[56,70,70,60],[57,8,71,6],[57,14,71,12,"AsyncStorage"],[57,26,71,24],[57,27,71,24,"default"],[57,34,71,24],[57,35,71,25,"setItem"],[57,42,71,32],[57,43,71,33],[57,54,71,44],[57,56,71,46,"JSON"],[57,60,71,50],[57,61,71,51,"stringify"],[57,70,71,60],[57,71,71,61,"userData"],[57,79,71,69],[57,80,71,70],[57,81,71,71],[58,8,73,6,"setToken"],[58,16,73,14],[58,17,73,15,"access_token"],[58,29,73,27],[58,30,73,28],[59,8,74,6,"setUser"],[59,15,74,13],[59,16,74,14,"userData"],[59,24,74,22],[59,25,74,23],[60,6,75,4],[60,7,75,5],[60,8,75,6],[60,15,75,13,"error"],[60,20,75,23],[60,22,75,25],[61,8,76,6],[61,14,76,12],[61,18,76,16,"Error"],[61,23,76,21],[61,24,76,22,"error"],[61,29,76,27],[61,30,76,28,"response"],[61,38,76,36],[61,40,76,38,"data"],[61,44,76,42],[61,46,76,44,"detail"],[61,52,76,50],[61,56,76,54],[61,70,76,68],[61,71,76,69],[62,6,77,4],[63,4,78,2],[63,5,78,3],[64,4,80,2],[64,10,80,8,"loginWithOTP"],[64,22,80,20],[64,25,80,23],[64,31,80,23,"loginWithOTP"],[64,32,80,30,"phone"],[64,37,80,43],[64,39,80,45,"otp"],[64,42,80,56],[64,47,80,61],[65,6,81,4],[65,10,81,8],[66,8,82,6],[66,14,82,12,"response"],[66,22,82,20],[66,25,82,23],[66,31,82,29,"axios"],[66,36,82,34],[66,37,82,34,"default"],[66,44,82,34],[66,45,82,35,"post"],[66,49,82,39],[66,50,82,40],[66,53,82,43,"API_URL"],[66,60,82,50],[66,82,82,72],[66,84,82,74],[67,10,83,8,"phone"],[67,15,83,13],[68,10,84,8,"otp"],[69,8,85,6],[69,9,85,7],[69,10,85,8],[70,8,87,6],[70,14,87,12],[71,10,87,14,"access_token"],[71,22,87,26],[72,10,87,28,"user"],[72,14,87,32],[72,16,87,34,"userData"],[73,8,87,43],[73,9,87,44],[73,12,87,47,"response"],[73,20,87,55],[73,21,87,56,"data"],[73,25,87,60],[74,8,89,6],[74,14,89,12,"AsyncStorage"],[74,26,89,24],[74,27,89,24,"default"],[74,34,89,24],[74,35,89,25,"setItem"],[74,42,89,32],[74,43,89,33],[74,55,89,45],[74,57,89,47,"access_token"],[74,69,89,59],[74,70,89,60],[75,8,90,6],[75,14,90,12,"AsyncStorage"],[75,26,90,24],[75,27,90,24,"default"],[75,34,90,24],[75,35,90,25,"setItem"],[75,42,90,32],[75,43,90,33],[75,54,90,44],[75,56,90,46,"JSON"],[75,60,90,50],[75,61,90,51,"stringify"],[75,70,90,60],[75,71,90,61,"userData"],[75,79,90,69],[75,80,90,70],[75,81,90,71],[76,8,92,6,"setToken"],[76,16,92,14],[76,17,92,15,"access_token"],[76,29,92,27],[76,30,92,28],[77,8,93,6,"setUser"],[77,15,93,13],[77,16,93,14,"userData"],[77,24,93,22],[77,25,93,23],[78,6,94,4],[78,7,94,5],[78,8,94,6],[78,15,94,13,"error"],[78,20,94,23],[78,22,94,25],[79,8,95,6],[79,14,95,12],[79,18,95,16,"Error"],[79,23,95,21],[79,24,95,22,"error"],[79,29,95,27],[79,30,95,28,"response"],[79,38,95,36],[79,40,95,38,"data"],[79,44,95,42],[79,46,95,44,"detail"],[79,52,95,50],[79,56,95,54],[79,81,95,79],[79,82,95,80],[80,6,96,4],[81,4,97,2],[81,5,97,3],[82,4,99,2],[82,10,99,8,"logout"],[82,16,99,14],[82,19,99,17],[82,25,99,17,"logout"],[82,26,99,17],[82,31,99,29],[83,6,100,4],[83,10,100,8],[84,8,101,6],[84,14,101,12,"AsyncStorage"],[84,26,101,24],[84,27,101,24,"default"],[84,34,101,24],[84,35,101,25,"removeItem"],[84,45,101,35],[84,46,101,36],[84,58,101,48],[84,59,101,49],[85,8,102,6],[85,14,102,12,"AsyncStorage"],[85,26,102,24],[85,27,102,24,"default"],[85,34,102,24],[85,35,102,25,"removeItem"],[85,45,102,35],[85,46,102,36],[85,57,102,47],[85,58,102,48],[86,8,103,6,"setToken"],[86,16,103,14],[86,17,103,15],[86,21,103,19],[86,22,103,20],[87,8,104,6,"setUser"],[87,15,104,13],[87,16,104,14],[87,20,104,18],[87,21,104,19],[88,6,105,4],[88,7,105,5],[88,8,105,6],[88,15,105,13,"error"],[88,20,105,18],[88,22,105,20],[89,8,106,6,"console"],[89,15,106,13],[89,16,106,14,"error"],[89,21,106,19],[89,22,106,20],[89,37,106,35],[89,39,106,37,"error"],[89,44,106,42],[89,45,106,43],[90,6,107,4],[91,4,108,2],[91,5,108,3],[92,4,110,2],[92,10,110,8,"isAdmin"],[92,17,110,15],[92,20,110,18,"user"],[92,24,110,22],[92,26,110,24,"role"],[92,30,110,28],[92,35,110,33],[92,42,110,40],[92,46,110,44,"user"],[92,50,110,48],[92,52,110,50,"role"],[92,56,110,54],[92,61,110,59],[92,74,110,72],[93,4,112,2],[93,24,113,4],[93,28,113,4,"_reactJsxDevRuntime"],[93,47,113,4],[93,48,113,4,"jsxDEV"],[93,54,113,4],[93,56,113,5,"AuthContext"],[93,67,113,16],[93,68,113,17,"Provider"],[93,76,113,25],[94,6,113,26,"value"],[94,11,113,31],[94,13,113,33],[95,8,113,35,"user"],[95,12,113,39],[96,8,113,41,"token"],[96,13,113,46],[97,8,113,48,"loginWithEmail"],[97,22,113,62],[98,8,113,64,"loginWithOTP"],[98,20,113,76],[99,8,113,78,"logout"],[99,14,113,84],[100,8,113,86,"isLoading"],[100,17,113,95],[101,8,113,97,"isAdmin"],[102,6,113,105],[102,7,113,107],[103,6,113,107,"children"],[103,14,113,107],[103,16,114,7,"children"],[104,4,114,15],[105,6,114,15,"fileName"],[105,14,114,15],[105,16,114,15,"_jsxFileName"],[105,28,114,15],[106,6,114,15,"lineNumber"],[106,16,114,15],[107,6,114,15,"columnNumber"],[107,18,114,15],[108,4,114,15],[108,11,115,26],[108,12,115,27],[109,2,117,0],[110,2,119,7],[110,11,119,16,"useAuth"],[110,18,119,23,"useAuth"],[110,19,119,23],[110,21,119,26],[111,4,120,2],[111,10,120,8,"context"],[111,17,120,15],[111,20,120,18],[111,24,120,18,"useContext"],[111,30,120,28],[111,31,120,28,"useContext"],[111,41,120,28],[111,43,120,29,"AuthContext"],[111,54,120,40],[111,55,120,41],[112,4,121,2],[112,8,121,6,"context"],[112,15,121,13],[112,20,121,18,"undefined"],[112,29,121,27],[112,31,121,29],[113,6,122,4],[113,12,122,10],[113,16,122,14,"Error"],[113,21,122,19],[113,22,122,20],[113,67,122,65],[113,68,122,66],[114,4,123,2],[115,4,124,2],[115,11,124,9,"context"],[115,18,124,16],[116,2,125,0],[117,0,125,1],[117,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","loginWithEmail","loginWithOTP","logout","useAuth"],"mappings":"AAA;OCmC;YCK;GDE;yBEE;GFc;yBGE;GHiB;uBIE;GJiB;iBKE;GLS;CDS;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}