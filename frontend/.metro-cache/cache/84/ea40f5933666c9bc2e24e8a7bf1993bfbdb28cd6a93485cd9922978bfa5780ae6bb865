{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        const storedUser = await AsyncStorage.default.getItem('user_data');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        await AsyncStorage.default.setItem('user_data', JSON.stringify(userData));\n        setToken(access_token);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('auth_token');\n        await AsyncStorage.default.removeItem('user_data');\n        setToken(null);\n        setUser(null);\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    };\n    const isAdmin = user?.role === 'admin' || user?.role === 'super_admin';\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        logout,\n        isLoading,\n        isAdmin\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":98,"map":[[13,2,35,0,"exports"],[13,9,35,0],[13,10,35,0,"AuthProvider"],[13,22,35,0],[13,25,35,0,"AuthProvider"],[13,37,35,0],[14,2,99,0,"exports"],[14,9,99,0],[14,10,99,0,"useAuth"],[14,17,99,0],[14,20,99,0,"useAuth"],[14,27,99,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_axios"],[18,12,3,0],[18,15,3,0,"require"],[18,22,3,0],[18,23,3,0,"_dependencyMap"],[18,37,3,0],[19,2,3,0],[19,6,3,0,"axios"],[19,11,3,0],[19,14,3,0,"_interopDefault"],[19,29,3,0],[19,30,3,0,"_axios"],[19,36,3,0],[20,2,3,26],[20,6,3,26,"_reactJsxDevRuntime"],[20,25,3,26],[20,28,3,26,"require"],[20,35,3,26],[20,36,3,26,"_dependencyMap"],[20,50,3,26],[21,2,5,0],[21,8,5,6,"API_URL"],[21,15,5,13],[21,18,5,16,"process"],[21,25,5,23],[21,26,5,24,"env"],[21,29,5,27],[21,30,5,28,"EXPO_PUBLIC_BACKEND_URL"],[21,53,5,51],[22,2,33,0],[22,8,33,6,"AuthContext"],[22,19,33,17],[22,35,33,20],[22,39,33,20,"createContext"],[22,45,33,33],[22,46,33,33,"createContext"],[22,59,33,33],[22,61,33,63,"undefined"],[22,70,33,72],[22,71,33,73],[23,2,35,7],[23,11,35,16,"AuthProvider"],[23,23,35,28,"AuthProvider"],[23,24,35,29],[24,4,35,31,"children"],[25,2,35,71],[25,3,35,72],[25,5,35,74],[26,4,36,2],[26,10,36,8],[26,11,36,9,"user"],[26,15,36,13],[26,17,36,15,"setUser"],[26,24,36,22],[26,25,36,23],[26,28,36,26],[26,32,36,26,"useState"],[26,38,36,34],[26,39,36,34,"useState"],[26,47,36,34],[26,49,36,48],[26,53,36,52],[26,54,36,53],[27,4,37,2],[27,10,37,8],[27,11,37,9,"token"],[27,16,37,14],[27,18,37,16,"setToken"],[27,26,37,24],[27,27,37,25],[27,30,37,28],[27,34,37,28,"useState"],[27,40,37,36],[27,41,37,36,"useState"],[27,49,37,36],[27,51,37,52],[27,55,37,56],[27,56,37,57],[28,4,38,2],[28,10,38,8],[28,11,38,9,"isLoading"],[28,20,38,18],[28,22,38,20,"setIsLoading"],[28,34,38,32],[28,35,38,33],[28,38,38,36],[28,42,38,36,"useState"],[28,48,38,44],[28,49,38,44,"useState"],[28,57,38,44],[28,59,38,45],[28,63,38,49],[28,64,38,50],[29,4,40,2],[29,8,40,2,"useEffect"],[29,14,40,11],[29,15,40,11,"useEffect"],[29,24,40,11],[29,26,40,12],[29,32,40,18],[30,6,41,4,"loadStoredAuth"],[30,20,41,18],[30,21,41,19],[30,22,41,20],[31,4,42,2],[31,5,42,3],[31,7,42,5],[31,9,42,7],[31,10,42,8],[32,4,44,2],[32,10,44,8,"loadStoredAuth"],[32,24,44,22],[32,27,44,25],[32,33,44,25,"loadStoredAuth"],[32,34,44,25],[32,39,44,37],[33,6,45,4],[33,10,45,8],[34,8,46,6],[34,14,46,12,"storedToken"],[34,25,46,23],[34,28,46,26],[34,34,46,32,"AsyncStorage"],[34,46,46,44],[34,47,46,44,"default"],[34,54,46,44],[34,55,46,45,"getItem"],[34,62,46,52],[34,63,46,53],[34,75,46,65],[34,76,46,66],[35,8,47,6],[35,14,47,12,"storedUser"],[35,24,47,22],[35,27,47,25],[35,33,47,31,"AsyncStorage"],[35,45,47,43],[35,46,47,43,"default"],[35,53,47,43],[35,54,47,44,"getItem"],[35,61,47,51],[35,62,47,52],[35,73,47,63],[35,74,47,64],[36,8,49,6],[36,12,49,10,"storedToken"],[36,23,49,21],[36,27,49,25,"storedUser"],[36,37,49,35],[36,39,49,37],[37,10,50,8,"setToken"],[37,18,50,16],[37,19,50,17,"storedToken"],[37,30,50,28],[37,31,50,29],[38,10,51,8,"setUser"],[38,17,51,15],[38,18,51,16,"JSON"],[38,22,51,20],[38,23,51,21,"parse"],[38,28,51,26],[38,29,51,27,"storedUser"],[38,39,51,37],[38,40,51,38],[38,41,51,39],[39,8,52,6],[40,6,53,4],[40,7,53,5],[40,8,53,6],[40,15,53,13,"error"],[40,20,53,18],[40,22,53,20],[41,8,54,6,"console"],[41,15,54,13],[41,16,54,14,"error"],[41,21,54,19],[41,22,54,20],[41,43,54,41],[41,45,54,43,"error"],[41,50,54,48],[41,51,54,49],[42,6,55,4],[42,7,55,5],[42,16,55,14],[43,8,56,6,"setIsLoading"],[43,20,56,18],[43,21,56,19],[43,26,56,24],[43,27,56,25],[44,6,57,4],[45,4,58,2],[45,5,58,3],[46,4,60,2],[46,10,60,8,"login"],[46,15,60,13],[46,18,60,16],[46,24,60,16,"login"],[46,25,60,23,"email"],[46,30,60,36],[46,32,60,38,"password"],[46,40,60,54],[46,45,60,59],[47,6,61,4],[47,10,61,8],[48,8,62,6],[48,14,62,12,"response"],[48,22,62,20],[48,25,62,23],[48,31,62,29,"axios"],[48,36,62,34],[48,37,62,34,"default"],[48,44,62,34],[48,45,62,35,"post"],[48,49,62,39],[48,50,62,40],[48,53,62,43,"API_URL"],[48,60,62,50],[48,77,62,67],[48,79,62,69],[49,10,63,8,"email"],[49,15,63,13],[50,10,64,8,"password"],[51,8,65,6],[51,9,65,7],[51,10,65,8],[52,8,67,6],[52,14,67,12],[53,10,67,14,"access_token"],[53,22,67,26],[54,10,67,28,"user"],[54,14,67,32],[54,16,67,34,"userData"],[55,8,67,43],[55,9,67,44],[55,12,67,47,"response"],[55,20,67,55],[55,21,67,56,"data"],[55,25,67,60],[56,8,69,6],[56,14,69,12,"AsyncStorage"],[56,26,69,24],[56,27,69,24,"default"],[56,34,69,24],[56,35,69,25,"setItem"],[56,42,69,32],[56,43,69,33],[56,55,69,45],[56,57,69,47,"access_token"],[56,69,69,59],[56,70,69,60],[57,8,70,6],[57,14,70,12,"AsyncStorage"],[57,26,70,24],[57,27,70,24,"default"],[57,34,70,24],[57,35,70,25,"setItem"],[57,42,70,32],[57,43,70,33],[57,54,70,44],[57,56,70,46,"JSON"],[57,60,70,50],[57,61,70,51,"stringify"],[57,70,70,60],[57,71,70,61,"userData"],[57,79,70,69],[57,80,70,70],[57,81,70,71],[58,8,72,6,"setToken"],[58,16,72,14],[58,17,72,15,"access_token"],[58,29,72,27],[58,30,72,28],[59,8,73,6,"setUser"],[59,15,73,13],[59,16,73,14,"userData"],[59,24,73,22],[59,25,73,23],[60,6,74,4],[60,7,74,5],[60,8,74,6],[60,15,74,13,"error"],[60,20,74,23],[60,22,74,25],[61,8,75,6],[61,14,75,12],[61,18,75,16,"Error"],[61,23,75,21],[61,24,75,22,"error"],[61,29,75,27],[61,30,75,28,"response"],[61,38,75,36],[61,40,75,38,"data"],[61,44,75,42],[61,46,75,44,"detail"],[61,52,75,50],[61,56,75,54],[61,70,75,68],[61,71,75,69],[62,6,76,4],[63,4,77,2],[63,5,77,3],[64,4,79,2],[64,10,79,8,"logout"],[64,16,79,14],[64,19,79,17],[64,25,79,17,"logout"],[64,26,79,17],[64,31,79,29],[65,6,80,4],[65,10,80,8],[66,8,81,6],[66,14,81,12,"AsyncStorage"],[66,26,81,24],[66,27,81,24,"default"],[66,34,81,24],[66,35,81,25,"removeItem"],[66,45,81,35],[66,46,81,36],[66,58,81,48],[66,59,81,49],[67,8,82,6],[67,14,82,12,"AsyncStorage"],[67,26,82,24],[67,27,82,24,"default"],[67,34,82,24],[67,35,82,25,"removeItem"],[67,45,82,35],[67,46,82,36],[67,57,82,47],[67,58,82,48],[68,8,83,6,"setToken"],[68,16,83,14],[68,17,83,15],[68,21,83,19],[68,22,83,20],[69,8,84,6,"setUser"],[69,15,84,13],[69,16,84,14],[69,20,84,18],[69,21,84,19],[70,6,85,4],[70,7,85,5],[70,8,85,6],[70,15,85,13,"error"],[70,20,85,18],[70,22,85,20],[71,8,86,6,"console"],[71,15,86,13],[71,16,86,14,"error"],[71,21,86,19],[71,22,86,20],[71,37,86,35],[71,39,86,37,"error"],[71,44,86,42],[71,45,86,43],[72,6,87,4],[73,4,88,2],[73,5,88,3],[74,4,90,2],[74,10,90,8,"isAdmin"],[74,17,90,15],[74,20,90,18,"user"],[74,24,90,22],[74,26,90,24,"role"],[74,30,90,28],[74,35,90,33],[74,42,90,40],[74,46,90,44,"user"],[74,50,90,48],[74,52,90,50,"role"],[74,56,90,54],[74,61,90,59],[74,74,90,72],[75,4,92,2],[75,24,93,4],[75,28,93,4,"_reactJsxDevRuntime"],[75,47,93,4],[75,48,93,4,"jsxDEV"],[75,54,93,4],[75,56,93,5,"AuthContext"],[75,67,93,16],[75,68,93,17,"Provider"],[75,76,93,25],[76,6,93,26,"value"],[76,11,93,31],[76,13,93,33],[77,8,93,35,"user"],[77,12,93,39],[78,8,93,41,"token"],[78,13,93,46],[79,8,93,48,"login"],[79,13,93,53],[80,8,93,55,"logout"],[80,14,93,61],[81,8,93,63,"isLoading"],[81,17,93,72],[82,8,93,74,"isAdmin"],[83,6,93,82],[83,7,93,84],[84,6,93,84,"children"],[84,14,93,84],[84,16,94,7,"children"],[85,4,94,15],[86,6,94,15,"fileName"],[86,14,94,15],[86,16,94,15,"_jsxFileName"],[86,28,94,15],[87,6,94,15,"lineNumber"],[87,16,94,15],[88,6,94,15,"columnNumber"],[88,18,94,15],[89,4,94,15],[89,11,95,26],[89,12,95,27],[90,2,97,0],[91,2,99,7],[91,11,99,16,"useAuth"],[91,18,99,23,"useAuth"],[91,19,99,23],[91,21,99,26],[92,4,100,2],[92,10,100,8,"context"],[92,17,100,15],[92,20,100,18],[92,24,100,18,"useContext"],[92,30,100,28],[92,31,100,28,"useContext"],[92,41,100,28],[92,43,100,29,"AuthContext"],[92,54,100,40],[92,55,100,41],[93,4,101,2],[93,8,101,6,"context"],[93,15,101,13],[93,20,101,18,"undefined"],[93,29,101,27],[93,31,101,29],[94,6,102,4],[94,12,102,10],[94,16,102,14,"Error"],[94,21,102,19],[94,22,102,20],[94,67,102,65],[94,68,102,66],[95,4,103,2],[96,4,104,2],[96,11,104,9,"context"],[96,18,104,16],[97,2,105,0],[98,0,105,1],[98,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","logout","useAuth"],"mappings":"AAA;OCkC;YCK;GDE;yBEE;GFc;gBGE;GHiB;iBIE;GJS;CDS;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}