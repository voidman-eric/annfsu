{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"WebSocketFactory\", {\n    enumerable: true,\n    get: function () {\n      return WebSocketFactory;\n    }\n  });\n  /**\n   * Utilities for creating WebSocket instances across runtimes.\n   */\n  class WebSocketFactory {\n    /**\n     * Static-only utility â€“ prevent instantiation.\n     */\n    constructor() {}\n    static detectEnvironment() {\n      var _a;\n      if (typeof WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: globalThis.WebSocket\n        };\n      }\n      if (typeof global !== 'undefined' && typeof global.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: global.WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocketPair !== 'undefined' && typeof globalThis.WebSocket === 'undefined') {\n        return {\n          type: 'cloudflare',\n          error: 'Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.',\n          workaround: 'Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.'\n        };\n      }\n      if (typeof globalThis !== 'undefined' && globalThis.EdgeRuntime || typeof navigator !== 'undefined' && ((_a = navigator.userAgent) === null || _a === void 0 ? void 0 : _a.includes('Vercel-Edge'))) {\n        return {\n          type: 'unsupported',\n          error: 'Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.',\n          workaround: 'Use serverless functions or a different deployment target for WebSocket functionality.'\n        };\n      }\n      if (typeof process !== 'undefined') {\n        // Use dynamic property access to avoid Next.js Edge Runtime static analysis warnings\n        const processVersions = process['versions'];\n        if (processVersions && processVersions['node']) {\n          // Remove 'v' prefix if present and parse the major version\n          const versionString = processVersions['node'];\n          const nodeVersion = parseInt(versionString.replace(/^v/, '').split('.')[0]);\n          // Node.js 22+ should have native WebSocket\n          if (nodeVersion >= 22) {\n            // Check if native WebSocket is available (should be in Node.js 22+)\n            if (typeof globalThis.WebSocket !== 'undefined') {\n              return {\n                type: 'native',\n                constructor: globalThis.WebSocket\n              };\n            }\n            // If not available, user needs to provide it\n            return {\n              type: 'unsupported',\n              error: `Node.js ${nodeVersion} detected but native WebSocket not found.`,\n              workaround: 'Provide a WebSocket implementation via the transport option.'\n            };\n          }\n          // Node.js < 22 doesn't have native WebSocket\n          return {\n            type: 'unsupported',\n            error: `Node.js ${nodeVersion} detected without native WebSocket support.`,\n            workaround: 'For Node.js < 22, install \"ws\" package and provide it via the transport option:\\n' + 'import ws from \"ws\"\\n' + 'new RealtimeClient(url, { transport: ws })'\n          };\n        }\n      }\n      return {\n        type: 'unsupported',\n        error: 'Unknown JavaScript runtime without WebSocket support.',\n        workaround: \"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.\"\n      };\n    }\n    /**\n     * Returns the best available WebSocket constructor for the current runtime.\n     *\n     * @example\n     * ```ts\n     * const WS = WebSocketFactory.getWebSocketConstructor()\n     * const socket = new WS('wss://realtime.supabase.co/socket')\n     * ```\n     */\n    static getWebSocketConstructor() {\n      const env = this.detectEnvironment();\n      if (env.constructor) {\n        return env.constructor;\n      }\n      let errorMessage = env.error || 'WebSocket not supported in this environment.';\n      if (env.workaround) {\n        errorMessage += `\\n\\nSuggested solution: ${env.workaround}`;\n      }\n      throw new Error(errorMessage);\n    }\n    /**\n     * Creates a WebSocket using the detected constructor.\n     *\n     * @example\n     * ```ts\n     * const socket = WebSocketFactory.createWebSocket('wss://realtime.supabase.co/socket')\n     * ```\n     */\n    static createWebSocket(url, protocols) {\n      const WS = this.getWebSocketConstructor();\n      return new WS(url, protocols);\n    }\n    /**\n     * Detects whether the runtime can establish WebSocket connections.\n     *\n     * @example\n     * ```ts\n     * if (!WebSocketFactory.isWebSocketSupported()) {\n     *   console.warn('Falling back to long polling')\n     * }\n     * ```\n     */\n    static isWebSocketSupported() {\n      try {\n        const env = this.detectEnvironment();\n        return env.type === 'native' || env.type === 'ws';\n      } catch (_a) {\n        return false;\n      }\n    }\n  }\n  var _default = WebSocketFactory;\n});","lineCount":150,"map":[[7,2,125,0,"Object"],[7,8,125,0],[7,9,125,0,"defineProperty"],[7,23,125,0],[7,24,125,0,"exports"],[7,31,125,0],[8,4,125,0,"enumerable"],[8,14,125,0],[9,4,125,0,"get"],[9,7,125,0],[9,18,125,0,"get"],[9,19,125,0],[10,6,125,0],[10,13,125,0,"_default"],[10,21,125,0],[11,4,125,0],[12,2,125,0],[13,2,4,0,"Object"],[13,8,4,0],[13,9,4,0,"defineProperty"],[13,23,4,0],[13,24,4,0,"exports"],[13,31,4,0],[14,4,4,0,"enumerable"],[14,14,4,0],[15,4,4,0,"get"],[15,7,4,0],[15,18,4,0,"get"],[15,19,4,0],[16,6,4,0],[16,13,4,0,"WebSocketFactory"],[16,29,4,0],[17,4,4,0],[18,2,4,0],[19,2,1,0],[20,0,2,0],[21,0,3,0],[22,2,4,7],[22,8,4,13,"WebSocketFactory"],[22,24,4,29],[22,25,4,30],[23,4,5,4],[24,0,6,0],[25,0,7,0],[26,4,8,4,"constructor"],[26,15,8,15,"constructor"],[26,16,8,15],[26,18,8,18],[26,19,8,20],[27,4,9,4],[27,11,9,11,"detectEnvironment"],[27,28,9,28,"detectEnvironment"],[27,29,9,28],[27,31,9,31],[28,6,10,8],[28,10,10,12,"_a"],[28,12,10,14],[29,6,11,8],[29,10,11,12],[29,17,11,19,"WebSocket"],[29,26,11,28],[29,31,11,33],[29,42,11,44],[29,44,11,46],[30,8,12,12],[30,15,12,19],[31,10,12,21,"type"],[31,14,12,25],[31,16,12,27],[31,24,12,35],[32,10,12,37,"constructor"],[32,21,12,48],[32,23,12,50,"WebSocket"],[33,8,12,60],[33,9,12,61],[34,6,13,8],[35,6,14,8],[35,10,14,12],[35,17,14,19,"globalThis"],[35,27,14,29],[35,32,14,34],[35,43,14,45],[35,47,14,49],[35,54,14,56,"globalThis"],[35,64,14,66],[35,65,14,67,"WebSocket"],[35,74,14,76],[35,79,14,81],[35,90,14,92],[35,92,14,94],[36,8,15,12],[36,15,15,19],[37,10,15,21,"type"],[37,14,15,25],[37,16,15,27],[37,24,15,35],[38,10,15,37,"constructor"],[38,21,15,48],[38,23,15,50,"globalThis"],[38,33,15,60],[38,34,15,61,"WebSocket"],[39,8,15,71],[39,9,15,72],[40,6,16,8],[41,6,17,8],[41,10,17,12],[41,17,17,19,"global"],[41,23,17,25],[41,28,17,30],[41,39,17,41],[41,43,17,45],[41,50,17,52,"global"],[41,56,17,58],[41,57,17,59,"WebSocket"],[41,66,17,68],[41,71,17,73],[41,82,17,84],[41,84,17,86],[42,8,18,12],[42,15,18,19],[43,10,18,21,"type"],[43,14,18,25],[43,16,18,27],[43,24,18,35],[44,10,18,37,"constructor"],[44,21,18,48],[44,23,18,50,"global"],[44,29,18,56],[44,30,18,57,"WebSocket"],[45,8,18,67],[45,9,18,68],[46,6,19,8],[47,6,20,8],[47,10,20,12],[47,17,20,19,"globalThis"],[47,27,20,29],[47,32,20,34],[47,43,20,45],[47,47,21,12],[47,54,21,19,"globalThis"],[47,64,21,29],[47,65,21,30,"WebSocketPair"],[47,78,21,43],[47,83,21,48],[47,94,21,59],[47,98,22,12],[47,105,22,19,"globalThis"],[47,115,22,29],[47,116,22,30,"WebSocket"],[47,125,22,39],[47,130,22,44],[47,141,22,55],[47,143,22,57],[48,8,23,12],[48,15,23,19],[49,10,24,16,"type"],[49,14,24,20],[49,16,24,22],[49,28,24,34],[50,10,25,16,"error"],[50,15,25,21],[50,17,25,23],[50,106,25,112],[51,10,26,16,"workaround"],[51,20,26,26],[51,22,26,28],[52,8,27,12],[52,9,27,13],[53,6,28,8],[54,6,29,8],[54,10,29,13],[54,17,29,20,"globalThis"],[54,27,29,30],[54,32,29,35],[54,43,29,46],[54,47,29,50,"globalThis"],[54,57,29,60],[54,58,29,61,"EdgeRuntime"],[54,69,29,72],[54,73,30,13],[54,80,30,20,"navigator"],[54,89,30,29],[54,94,30,34],[54,105,30,45],[54,110,30,50],[54,111,30,51,"_a"],[54,113,30,53],[54,116,30,56,"navigator"],[54,125,30,65],[54,126,30,66,"userAgent"],[54,135,30,75],[54,141,30,81],[54,145,30,85],[54,149,30,89,"_a"],[54,151,30,91],[54,156,30,96],[54,161,30,101],[54,162,30,102],[54,165,30,105],[54,170,30,110],[54,171,30,111],[54,174,30,114,"_a"],[54,176,30,116],[54,177,30,117,"includes"],[54,185,30,125],[54,186,30,126],[54,199,30,139],[54,200,30,140],[54,201,30,142],[54,203,30,144],[55,8,31,12],[55,15,31,19],[56,10,32,16,"type"],[56,14,32,20],[56,16,32,22],[56,29,32,35],[57,10,33,16,"error"],[57,15,33,21],[57,17,33,23],[57,116,33,122],[58,10,34,16,"workaround"],[58,20,34,26],[58,22,34,28],[59,8,35,12],[59,9,35,13],[60,6,36,8],[61,6,37,8],[61,10,37,12],[61,17,37,19,"process"],[61,24,37,26],[61,29,37,31],[61,40,37,42],[61,42,37,44],[62,8,38,12],[63,8,39,12],[63,14,39,18,"processVersions"],[63,29,39,33],[63,32,39,36,"process"],[63,39,39,43],[63,40,39,44],[63,50,39,54],[63,51,39,55],[64,8,40,12],[64,12,40,16,"processVersions"],[64,27,40,31],[64,31,40,35,"processVersions"],[64,46,40,50],[64,47,40,51],[64,53,40,57],[64,54,40,58],[64,56,40,60],[65,10,41,16],[66,10,42,16],[66,16,42,22,"versionString"],[66,29,42,35],[66,32,42,38,"processVersions"],[66,47,42,53],[66,48,42,54],[66,54,42,60],[66,55,42,61],[67,10,43,16],[67,16,43,22,"nodeVersion"],[67,27,43,33],[67,30,43,36,"parseInt"],[67,38,43,44],[67,39,43,45,"versionString"],[67,52,43,58],[67,53,43,59,"replace"],[67,60,43,66],[67,61,43,67],[67,65,43,71],[67,67,43,73],[67,69,43,75],[67,70,43,76],[67,71,43,77,"split"],[67,76,43,82],[67,77,43,83],[67,80,43,86],[67,81,43,87],[67,82,43,88],[67,83,43,89],[67,84,43,90],[67,85,43,91],[68,10,44,16],[69,10,45,16],[69,14,45,20,"nodeVersion"],[69,25,45,31],[69,29,45,35],[69,31,45,37],[69,33,45,39],[70,12,46,20],[71,12,47,20],[71,16,47,24],[71,23,47,31,"globalThis"],[71,33,47,41],[71,34,47,42,"WebSocket"],[71,43,47,51],[71,48,47,56],[71,59,47,67],[71,61,47,69],[72,14,48,24],[72,21,48,31],[73,16,48,33,"type"],[73,20,48,37],[73,22,48,39],[73,30,48,47],[74,16,48,49,"constructor"],[74,27,48,60],[74,29,48,62,"globalThis"],[74,39,48,72],[74,40,48,73,"WebSocket"],[75,14,48,83],[75,15,48,84],[76,12,49,20],[77,12,50,20],[78,12,51,20],[78,19,51,27],[79,14,52,24,"type"],[79,18,52,28],[79,20,52,30],[79,33,52,43],[80,14,53,24,"error"],[80,19,53,29],[80,21,53,31],[80,32,53,42,"nodeVersion"],[80,43,53,53],[80,86,53,96],[81,14,54,24,"workaround"],[81,24,54,34],[81,26,54,36],[82,12,55,20],[82,13,55,21],[83,10,56,16],[84,10,57,16],[85,10,58,16],[85,17,58,23],[86,12,59,20,"type"],[86,16,59,24],[86,18,59,26],[86,31,59,39],[87,12,60,20,"error"],[87,17,60,25],[87,19,60,27],[87,30,60,38,"nodeVersion"],[87,41,60,49],[87,86,60,94],[88,12,61,20,"workaround"],[88,22,61,30],[88,24,61,32],[88,107,61,115],[88,110,62,24],[88,133,62,47],[88,136,63,24],[89,10,64,16],[89,11,64,17],[90,8,65,12],[91,6,66,8],[92,6,67,8],[92,13,67,15],[93,8,68,12,"type"],[93,12,68,16],[93,14,68,18],[93,27,68,31],[94,8,69,12,"error"],[94,13,69,17],[94,15,69,19],[94,70,69,74],[95,8,70,12,"workaround"],[95,18,70,22],[95,20,70,24],[96,6,71,8],[96,7,71,9],[97,4,72,4],[98,4,73,4],[99,0,74,0],[100,0,75,0],[101,0,76,0],[102,0,77,0],[103,0,78,0],[104,0,79,0],[105,0,80,0],[106,0,81,0],[107,4,82,4],[107,11,82,11,"getWebSocketConstructor"],[107,34,82,34,"getWebSocketConstructor"],[107,35,82,34],[107,37,82,37],[108,6,83,8],[108,12,83,14,"env"],[108,15,83,17],[108,18,83,20],[108,22,83,24],[108,23,83,25,"detectEnvironment"],[108,40,83,42],[108,41,83,43],[108,42,83,44],[109,6,84,8],[109,10,84,12,"env"],[109,13,84,15],[109,14,84,16,"constructor"],[109,25,84,27],[109,27,84,29],[110,8,85,12],[110,15,85,19,"env"],[110,18,85,22],[110,19,85,23,"constructor"],[110,30,85,34],[111,6,86,8],[112,6,87,8],[112,10,87,12,"errorMessage"],[112,22,87,24],[112,25,87,27,"env"],[112,28,87,30],[112,29,87,31,"error"],[112,34,87,36],[112,38,87,40],[112,84,87,86],[113,6,88,8],[113,10,88,12,"env"],[113,13,88,15],[113,14,88,16,"workaround"],[113,24,88,26],[113,26,88,28],[114,8,89,12,"errorMessage"],[114,20,89,24],[114,24,89,28],[114,51,89,55,"env"],[114,54,89,58],[114,55,89,59,"workaround"],[114,65,89,69],[114,67,89,71],[115,6,90,8],[116,6,91,8],[116,12,91,14],[116,16,91,18,"Error"],[116,21,91,23],[116,22,91,24,"errorMessage"],[116,34,91,36],[116,35,91,37],[117,4,92,4],[118,4,93,4],[119,0,94,0],[120,0,95,0],[121,0,96,0],[122,0,97,0],[123,0,98,0],[124,0,99,0],[125,0,100,0],[126,4,101,4],[126,11,101,11,"createWebSocket"],[126,26,101,26,"createWebSocket"],[126,27,101,27,"url"],[126,30,101,30],[126,32,101,32,"protocols"],[126,41,101,41],[126,43,101,43],[127,6,102,8],[127,12,102,14,"WS"],[127,14,102,16],[127,17,102,19],[127,21,102,23],[127,22,102,24,"getWebSocketConstructor"],[127,45,102,47],[127,46,102,48],[127,47,102,49],[128,6,103,8],[128,13,103,15],[128,17,103,19,"WS"],[128,19,103,21],[128,20,103,22,"url"],[128,23,103,25],[128,25,103,27,"protocols"],[128,34,103,36],[128,35,103,37],[129,4,104,4],[130,4,105,4],[131,0,106,0],[132,0,107,0],[133,0,108,0],[134,0,109,0],[135,0,110,0],[136,0,111,0],[137,0,112,0],[138,0,113,0],[139,0,114,0],[140,4,115,4],[140,11,115,11,"isWebSocketSupported"],[140,31,115,31,"isWebSocketSupported"],[140,32,115,31],[140,34,115,34],[141,6,116,8],[141,10,116,12],[142,8,117,12],[142,14,117,18,"env"],[142,17,117,21],[142,20,117,24],[142,24,117,28],[142,25,117,29,"detectEnvironment"],[142,42,117,46],[142,43,117,47],[142,44,117,48],[143,8,118,12],[143,15,118,19,"env"],[143,18,118,22],[143,19,118,23,"type"],[143,23,118,27],[143,28,118,32],[143,36,118,40],[143,40,118,44,"env"],[143,43,118,47],[143,44,118,48,"type"],[143,48,118,52],[143,53,118,57],[143,57,118,61],[144,6,119,8],[144,7,119,9],[144,8,120,8],[144,15,120,15,"_a"],[144,17,120,17],[144,19,120,19],[145,8,121,12],[145,15,121,19],[145,20,121,24],[146,6,122,8],[147,4,123,4],[148,2,124,0],[149,2,125,0],[149,6,125,0,"_default"],[149,14,125,0],[149,17,125,15,"WebSocketFactory"],[149,33,125,31],[150,0,125,32],[150,3]],"functionMap":{"names":["<global>","WebSocketFactory","WebSocketFactory#constructor","WebSocketFactory.detectEnvironment","WebSocketFactory.getWebSocketConstructor","WebSocketFactory.createWebSocket","WebSocketFactory.isWebSocketSupported"],"mappings":"AAA;OCG;ICI,iBD;IEC;KF+D;IGU;KHU;IIS;KJG;IKW;KLQ;CDC"},"hasCjsExports":false},"type":"js/module"}]}